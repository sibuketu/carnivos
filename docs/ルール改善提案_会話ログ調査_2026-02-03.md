# ルール改善提案（会話ログ徹底調査ベース）2026-02-03

> **目的**: AGENT_LOG.md および second-brain の会話履歴・チャットログから、ルールの矛盾・不整合・変更した方がよい点を洗い出した。

---

## 1. 【最優先】パスの統一（ワークスペース不一致）

### 現状
- **現在のワークスペース**: `c:\Users\susam\Downloads\CarnivOS`
- **master_rule.mdc（primal-logic-app / docs）に書かれているパス**:
  - Obsidian: `C:\Users\susam\Downloads\primal-logic-docs\docs\second-brain\`
  - AGENT_LOG: `C:\Users\susam\Downloads\primal-logic-docs\docs\primal-logic-app\primal-logic-web\docs\AGENT_LOG.md`
- **RULES.md / CURSOR_NEXT_TASKS 等**: `C:\Users\susam\Downloads\新しいフォルダー\docs\...`
- **CURSOR_NEXT_TASKS.md**: CarnivOS 用に `C:\Users\susam\Downloads\CarnivOS\docs\primal-logic-app\primal-logic-web` を記載済み

### 問題
CarnivOS で作業しているのに、master_rule と RULES.md の絶対パスが「primal-logic-docs」「新しいフォルダー」のまま。sibuketu に渡すパス・AGENT_LOG の場所・Obsidian の場所が実際の環境とずれる。

### 推奨変更
1. **CarnivOS を主ワークスペースとする場合**
   - **master_rule.mdc**（docs と primal-logic-app の両方）の以下を CarnivOS ベースに更新する:
     - Obsidian: `C:\Users\susam\Downloads\CarnivOS\docs\second-brain\`
     - AGENT_LOG: `C:\Users\susam\Downloads\CarnivOS\docs\primal-logic-app\primal-logic-web\docs\AGENT_LOG.md`
   - **RULES.md** の「5.2 / 5.3 / 6.4」の絶対パスを、CarnivOS ベースに統一する。
2. **複数フォルダ（primal-logic-docs / 新しいフォルダー / CarnivOS）を使い分けている場合**
   - ルールに「**ワークスペースが CarnivOS のときは** `C:\Users\susam\Downloads\CarnivOS\...` を使う」と明記し、AGENT_LOG の場所・Obsidian の場所をワークスペース別に書く。

---

## 2. master_rule.mdc の二重管理と内容のずれ

### 現状
- **docs/.cursor/rules/master_rule.mdc**: 「ユーザー」表記。5.4a の sibuketu・絶対パス・@Browser はあるが、**セクション1に「呼称: sibuketu」がない**。
- **docs/primal-logic-app/.cursor/rules/master_rule.mdc**: **「呼称: sibuketu」**、**5.7 会話・アイデア保存（CHAT_ARCHIVE）**、**5.8 決定の根拠・プロセス**、**5.11 Gemini**、**5.12 判断の分担・質問前のObsidian・候補羅列禁止**、**6. 確定案の再報告禁止・余計な報告禁止** など、会話ログで追加されたルールが含まれている。

### 問題
同じ「master_rule」が2か所にあり、**docs 側が古く、primal-logic-app 側が新しい**。どちらを開くかで効くルールが変わる。

### 推奨変更
1. **正本を1つに決める**: 例として `docs/primal-logic-app/.cursor/rules/master_rule.mdc` を正本とする。
2. **docs/.cursor/rules/master_rule.mdc** を、primal-logic-app の内容と**完全に同期**する（呼称 sibuketu、5.7、5.8、5.11、5.12、報告簡潔化など）。
3. あるいは「master_rule は primal-logic-app の .cursor/rules のみに置き、docs はシンボリックリンクまたは参照のみ」とルールに明記する。

---

## 3. 報告の簡潔化（ルールと AGENT_LOG テンプレの一致）

### 会話ログで起きたこと
- 「確定案の再報告禁止」「余計な報告禁止」が master_rule に追加された。
- 報告は「**変更ファイル一覧・残件数・実行コマンド（1コードブロック）**のみ」と明文化された。

### 現状
- **AGENT_LOG.md の追記テンプレ**（RULES.md / master_rule 内）は依然として「変更点(要約)」「触ったファイル」を細かく書く形式。
- 毎回「変更点(要約)」に長文を書くと、報告が冗長になりがち。

### 推奨変更
- **AGENT_LOG のテンプレ**を「簡潔版」と「詳細版」の2パターン用意するか、あるいは「通常は変更ファイル・残件・1コードブロックのみ。大きな仕様変更や複数 Agent が絡むときだけ変更点(要約)を書く」とルールに書く。
- これにより「報告簡潔化」ルールと AGENT_LOG の運用が一致する。

---

## 4. RULES.md と master_rule の用語・ファイル名の揺れ

### 現状
- **RULES.md 6.1**: 「完全日本語ファイル名」「決定事項ログ.md」
- **master_rule 5.7**: 「ファイル名は日本語可、**フォルダ名は英語**」「DECISION_LOG.md」の表記も他ファイルにあり得る。

### 推奨
- 「新規ファイル名は日本語。フォルダ名（パスに含む）は英語」で **RULES.md と master_rule の両方に同じ一文を入れる**。
- 決定事項ログのファイル名を **「決定事項ログ.md」か「DECISION_LOG.md」のどちらかに統一**し、両方のルールに同じ名前を書く。

---

## 5. 会話ログから取り込まれているが、他ルールに未反映のもの

以下は AGENT_LOG 上で「ルール追加」として実施済みだが、**RULES.md や docs/.cursor/rules には入っていない可能性**がある。

| 内容 | 推奨 |
|------|------|
| **sibuketu 呼称** | docs の master_rule に追加（上記 2 で同期）。 |
| **確定案の再報告禁止** | RULES.md の「7. コミュニケーション」に一文追加。 |
| **次にやること候補を羅列しない**（やれることはその場でやる） | RULES.md の「次にやることの提案プロトコル」付近に追記。 |
| **質問する前に Obsidian を検索** | RULES.md の「Obsidianの活用」に「質問前に second-brain を検索」を明記。 |

---

## 6. 変更しないでよいと判断したもの（会話ログ根拠）

| ルール | 理由 |
|--------|------|
| ターミナルは Cursor が実行、無理なら1コードブロックで渡す | 「Antigravity 委託」→「やっぱり要らん」で戻しており、現状で確定。 |
| AIができることは全てやる | すでに master_rule に明記済み。 |
| コードブロックは1つにまとめる | 同上。 |
| 謝罪禁止・重複確認禁止・実行優先 | 会話ログで不満を受けた結果すでにルール化済み。 |

---

## 7. 実施する場合の優先順位

1. **パス統一**（CarnivOS を主とするなら master_rule + RULES.md の絶対パスを CarnivOS に合わせる）。
2. **master_rule の同期**（docs と primal-logic-app の内容を一致させる、または正本を決める）。
3. **報告簡潔化と AGENT_LOG テンプレ**の整合。
4. **用語・ファイル名の統一**（決定事項ログ名、ファイル名は日本語／フォルダ名は英語の明文化）。
5. **RULES.md への追加**（確定案の再報告禁止、候補羅列禁止、質問前 Obsidian 検索）。

---

## 8. 参照したログ・ルール一覧

- `docs/primal-logic-app/primal-logic-web/docs/AGENT_LOG.md`（直近〜2026-02-03 全件）
- `docs/.cursor/rules/master_rule.mdc`
- `docs/primal-logic-app/.cursor/rules/master_rule.mdc`
- `docs/primal-logic-app/primal-logic-web/RULES.md`
- `.cursorrules`（CarnivOS ルート）
- `docs/.cursorrules`
- `docs/primal-logic-app/.cursorrules`
- `docs/second-brain/会話履歴/2026-02-03_機能仕様.md`
- `docs/second-brain/50_Logs_Memory/chat-logs/` 内の cursor-log / agent-log の一部

以上。
