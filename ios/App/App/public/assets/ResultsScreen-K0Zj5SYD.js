import{b,j as t}from"./index-CvGLKNdl.js";import{r as l}from"./chart-vendor-BKK2UjWf.js";import{A as j}from"./AnimalCounter-mani3_wF.js";import"./react-vendor-OvXVS5lI.js";import"./ai-vendor-9LcfXvm6.js";function B(){const[n,c]=l.useState([]),[i,m]=l.useState("week"),[s,x]=l.useState("summary");l.useEffect(()=>{g()},[]);const g=async()=>{const e=await b();c(e)},o=n.filter(e=>{const r=new Date(e.date),a=Math.floor((new Date().getTime()-r.getTime())/(1e3*60*60*24));return i==="week"?a<=7:i==="month"?a<=30:a<=365}),p=o.reduce((e,r)=>e+(r.calculatedMetrics?.proteinTotal||0),0),h=o.reduce((e,r)=>e+(r.calculatedMetrics?.fatTotal||0),0),u=o.length>0?p/o.length:0,f=o.length>0?h/o.length:0,d=n.flatMap(e=>e.fuel||[]).filter(e=>e.photoUrl).map(e=>({url:e.photoUrl,name:e.item,date:n.find(r=>r.fuel?.includes(e))?.date||""})),y=i==="week"?"ä»Šé€±":i==="month"?"ä»Šæœˆ":"ä»Šå¹´";return t.jsx("div",{className:"results-screen-container",children:t.jsxs("div",{className:"results-screen-content",children:[t.jsx("h1",{className:"results-screen-title",children:"ðŸ“Š ãƒªã‚¶ãƒ«ãƒˆ"}),t.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.5rem",borderBottom:"2px solid #27272a"},children:["summary","gallery"].map(e=>t.jsx("button",{onClick:()=>x(e),style:{padding:"0.75rem 1.5rem",backgroundColor:s===e?"#b91c1c":"transparent",color:s===e?"white":"#a1a1aa",border:"none",borderBottom:s===e?"2px solid #b91c1c":"2px solid transparent",cursor:"pointer",fontWeight:s===e?"bold":"600",transition:"all 0.2s",fontSize:"14px"},children:e==="summary"?"ã‚µãƒžãƒªãƒ¼":"å†™çœŸã‚®ãƒ£ãƒ©ãƒªãƒ¼"},e))}),s==="summary"&&t.jsxs("div",{children:[t.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.5rem"},children:["week","month","year"].map(e=>t.jsx("button",{onClick:()=>m(e),style:{padding:"0.5rem 1rem",backgroundColor:i===e?"#dc2626":"#27272a",color:i===e?"white":"#a1a1aa",border:"1px solid",borderColor:i===e?"#dc2626":"#3f3f46",borderRadius:"8px",cursor:"pointer",fontWeight:"500",fontSize:"14px",transition:"all 0.2s"},children:e==="week"?"ä»Šé€±":e==="month"?"ä»Šæœˆ":"ä»Šå¹´"},e))}),t.jsxs("div",{style:{backgroundColor:"#18181b",padding:"1.5rem",borderRadius:"12px",border:"1px solid #27272a",marginBottom:"1.5rem"},children:[t.jsxs("h2",{style:{fontSize:"18px",fontWeight:"bold",marginBottom:"1rem",color:"#f43f5e",textShadow:"0 0 5px rgba(244, 63, 94, 0.4)"},children:[y,"ã®ã¾ã¨ã‚"]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[t.jsxs("div",{style:{padding:"1rem",backgroundColor:"#27272a",borderRadius:"8px"},children:[t.jsx("div",{style:{fontSize:"12px",color:"#a1a1aa",marginBottom:"0.5rem"},children:"è¨˜éŒ²æ—¥æ•°"}),t.jsxs("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#e4e4e7"},children:[o.length," æ—¥"]})]}),t.jsxs("div",{style:{padding:"1rem",backgroundColor:"#27272a",borderRadius:"8px"},children:[t.jsx("div",{style:{fontSize:"12px",color:"#a1a1aa",marginBottom:"0.5rem"},children:"å¹³å‡ã‚¿ãƒ³ãƒ‘ã‚¯è³ª"}),t.jsxs("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#e4e4e7"},children:[u.toFixed(0)," g"]})]}),t.jsxs("div",{style:{padding:"1rem",backgroundColor:"#27272a",borderRadius:"8px"},children:[t.jsx("div",{style:{fontSize:"12px",color:"#a1a1aa",marginBottom:"0.5rem"},children:"å¹³å‡è„‚è³ª"}),t.jsxs("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#e4e4e7"},children:[f.toFixed(0)," g"]})]})]})]}),t.jsx(j,{logs:o})]}),s==="gallery"&&t.jsx("div",{children:d.length===0?t.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"#71717a"},children:[t.jsx("div",{style:{fontSize:"48px",marginBottom:"1rem"},children:"ðŸ“¸"}),t.jsx("div",{style:{fontSize:"16px"},children:"ã¾ã å†™çœŸãŒè¨˜éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“"}),t.jsx("div",{style:{fontSize:"14px",marginTop:"0.5rem"},children:"é£Ÿäº‹ã‚’è¨˜éŒ²ã™ã‚‹éš›ã«å†™çœŸã‚’è¿½åŠ ã—ã¦ã¿ã¾ã—ã‚‡ã†"})]}):t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"1rem"},children:d.map((e,r)=>t.jsxs("div",{style:{position:"relative",aspectRatio:"1",borderRadius:"8px",overflow:"hidden",border:"1px solid #27272a"},children:[t.jsx("img",{src:e.url,alt:e.name,style:{width:"100%",height:"100%",objectFit:"cover"}}),t.jsx("div",{style:{position:"absolute",bottom:0,left:0,right:0,padding:"0.5rem",background:"linear-gradient(to top, rgba(0,0,0,0.8), transparent)",color:"white",fontSize:"12px"},children:e.name})]},r))})})]})})}export{B as default};
