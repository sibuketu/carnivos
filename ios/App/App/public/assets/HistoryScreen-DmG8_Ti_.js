import{u as ae,a as ie,g as le,b as se,c as ce,i as U,d as de,j as t,M as i,r as ue,e as me,f as ge,s as pe,l as he,h as be,k as _,m as ye,n as fe,o as z}from"./index-CvGLKNdl.js";import{r as u}from"./chart-vendor-BKK2UjWf.js";import"./react-vendor-OvXVS5lI.js";import"./ai-vendor-9LcfXvm6.js";function Te(){const{t:a}=ae(),{userProfile:l,addFood:F}=ie();le();const[N,O]=u.useState([]),[B,E]=u.useState(new Set),[f,H]=u.useState("all"),[D,$]=u.useState("logs"),[q,R]=u.useState(!1),[C,L]=u.useState(null),[b,K]=u.useState(""),[V,P]=u.useState({}),[w,G]=u.useState(!1),[Z,J]=u.useState([]),[Q,M]=u.useState(!1),[v,k]=u.useState(null),x=u.useCallback(async()=>{const r=(await se()).sort((o,s)=>s.date.localeCompare(o.date));O(r)},[]);u.useEffect(()=>{x(),I()},[]);const I=u.useCallback(()=>{J(ce())},[]),S=u.useRef(null);u.useEffect(()=>{const e=n=>{n.key==="settings_debug_mode"&&x()};window.addEventListener("storage",e);const r=()=>{x()};window.addEventListener("debugModeChanged",r);const o=()=>{S.current&&clearTimeout(S.current),S.current=setTimeout(()=>{x(),S.current=null},500)};window.addEventListener("dailyLogUpdated",o);const s=()=>{x()};window.addEventListener("foodAdded",s);const d=()=>{I()};return window.addEventListener("favoritesUpdated",d),()=>{window.removeEventListener("storage",e),window.removeEventListener("debugModeChanged",r),window.removeEventListener("dailyLogUpdated",o),window.removeEventListener("foodAdded",s),window.removeEventListener("favoritesUpdated",d),S.current&&clearTimeout(S.current)}},[]);const X=e=>{const r=new Date(e),o=a("common.locale");return r.toLocaleDateString(o,{year:"numeric",month:"short",day:"numeric"})},A=e=>{const r=new Set(B);r.has(e)?r.delete(e):r.add(e),E(r)},Y=async e=>{if(window.confirm(a("history.deleteConfirm")))try{await ye(e),await x();const r=new Set(B);r.delete(e),E(r)}catch(r){const o=fe(r);alert(`${a("history.deleteFailed")}: ${o}`)}},ee=e=>{L(e),K(e.amount.toString()),R(!0)},te=async(e,r)=>{const o=r!==void 0?r:e.amount;if(e.nutrients&&Object.keys(e.nutrients).length>0){const h=o/e.amount,T={...e,amount:o,nutrients:Object.fromEntries(Object.entries(e.nutrients||{}).map(([re,ne])=>[re,(ne||0)*h]))};F(T),setTimeout(()=>{x()},100);const oe=new CustomEvent("navigateToScreen",{detail:"home"});window.dispatchEvent(oe);return}const s=e.item.replace(/[Ôºà(].*?[Ôºâ)]/g,"").replace(/\s+/g," ").trim();let d=z(s);if(d.length===0){const h=e.item.split(/[Ôºà(]/)[0].trim();h&&(d=z(h))}d.length===0&&(d=z(e.item));const n=d.length>0?d[0]:null;if(!n){const h={...e,amount:o,nutrients:{}};F(h),setTimeout(()=>{x()},100);const T=new CustomEvent("navigateToScreen",{detail:"home"});window.dispatchEvent(T);return}let m=o;e.unit==="ÂÄã"&&n.pieceWeight&&(m=o*n.pieceWeight);const c=m/100,y={item:e.item,amount:o,unit:e.unit,type:n.type,nutrients:{protein:(n.nutrientsRaw.protein||0)*c,fat:(n.nutrientsRaw.fat||0)*c,carbs:(n.nutrientsRaw.carbs||0)*c,netCarbs:(n.nutrientsRaw.carbs||0)*c,fiber:(n.nutrientsRaw.fiber||0)*c,hemeIron:(n.nutrientsRaw.hemeIron||0)*c,nonHemeIron:(n.nutrientsRaw.nonHemeIron||0)*c,zinc:(n.nutrientsRaw.zinc||0)*c,sodium:(n.nutrientsRaw.sodium||0)*c,magnesium:(n.nutrientsRaw.magnesium||0)*c,vitaminC:(n.nutrientsRaw.vitaminC||0)*c,vitaminK:(n.nutrientsRaw.vitaminK||0)*c,vitaminB12:(n.nutrientsRaw.vitaminB12||0)*c}};F(y),setTimeout(()=>{window.dispatchEvent(new CustomEvent("dailyLogUpdated")),x()},200);const j=new CustomEvent("navigateToScreen",{detail:"home"});window.dispatchEvent(j)},p=u.useMemo(()=>{if(N.length===0)return[];let e=N;if(f==="today"){const r=new Date().toISOString().split("T")[0];e=e.filter(o=>o.date===r)}else f==="7days"?e=e.filter(r=>{const o=new Date(r.date),s=new Date;return s.setDate(s.getDate()-7),o>=s}):f==="30days"&&(e=e.filter(r=>{const o=new Date(r.date),s=new Date;return s.setDate(s.getDate()-30),o>=s}));return w&&(e=e.map(r=>{const o=r.fuel.filter(s=>U(s)!==null);return o.length===0?null:{...r,fuel:o}}).filter(r=>r!==null)),e},[N,f,w,Z]),g=u.useMemo(()=>de(l?.gender,l?.age,l?.activityLevel,l?.isPregnant,l?.isBreastfeeding,l?.isPostMenopause,l?.stressLevel,l?.sleepHours,l?.exerciseIntensity,l?.exerciseFrequency,l?.thyroidFunction,l?.sunExposureFrequency,l?.digestiveIssues,l?.inflammationLevel,l?.mentalHealthStatus,l?.supplementMagnesium,l?.supplementVitaminD,l?.supplementIodine,l?.alcoholFrequency,l?.caffeineIntake,l?.daysOnCarnivore,l?.carnivoreStartDate,l?.forceAdaptationMode,l?.bodyComposition,l?.weight,l?.metabolicStressIndicators,l?.customNutrientTargets?Object.fromEntries(Object.entries(l.customNutrientTargets).map(([e,r])=>[e,typeof r=="number"?{mode:"manual",value:r}:r])):void 0),[l]),W=u.useMemo(()=>{if(p.length===0)return null;const e=p.length,r=p.filter(s=>s.calculatedMetrics?.hasViolation).length,o=e-r;return{totalDays:e,violationDays:r,noViolationDays:o}},[p]);return t.jsx("div",{className:"history-screen-container",children:t.jsxs("div",{className:"history-screen-content",children:[t.jsx("h1",{className:"history-screen-title",children:a("history.title")}),t.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem",flexWrap:"wrap"},children:[[{key:"today",label:a("home.today")},{key:"7days",label:a("history.7days")},{key:"30days",label:a("history.30days")},{key:"all",label:a("history.all")}].map(({key:e,label:r})=>t.jsx("button",{onClick:()=>H(e),style:{padding:"0.5rem 1rem",backgroundColor:f===e?"#dc2626":"#f9fafb",color:f===e?"white":"#78716c",border:"1px solid",borderColor:f===e?"#dc2626":"#e5e7eb",borderRadius:"8px",cursor:"pointer",fontWeight:"500",fontSize:"14px",transition:"all 0.2s"},children:r},e)),t.jsxs("button",{onClick:()=>G(!w),style:{padding:"0.5rem 1rem",backgroundColor:w?"#f59e0b":"#f9fafb",color:w?"white":"#78716c",border:"1px solid",borderColor:w?"#f59e0b":"#e5e7eb",borderRadius:"8px",cursor:"pointer",fontWeight:"500",fontSize:"14px",transition:"all 0.2s",marginLeft:"auto"},title:w?"„ÅäÊ∞ó„Å´ÂÖ•„Çä„ÅÆ„ÅøË°®Á§∫‰∏≠":"„Åô„Åπ„Å¶Ë°®Á§∫‰∏≠",children:["‚≠ê ",w?"„ÅäÊ∞ó„Å´ÂÖ•„Çä„ÅÆ„Åø":"„Åô„Åπ„Å¶"]})]}),t.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem",borderBottom:"2px solid #e5e7eb"},children:[{key:"summary",label:a("history.summary")},{key:"logs",label:a("history.title")}].map(({key:e,label:r})=>t.jsx("button",{onClick:()=>$(e),style:{padding:"0.5rem 1rem",backgroundColor:D===e?"#b91c1c":"var(--color-bg-secondary)",color:D===e?"white":"var(--color-text-primary)",border:"none",borderBottom:D===e?"2px solid #b91c1c":"2px solid transparent",cursor:"pointer",fontWeight:D===e?"bold":"600",transition:"all 0.2s"},children:r},e))}),D==="summary"&&p.length>0&&W&&(()=>{const e=p.reduce((h,T)=>h+(T.calculatedMetrics.animalEffectiveProtein??T.calculatedMetrics.effectiveProtein??0),0),r=p.reduce((h,T)=>h+(T.calculatedMetrics.fatTotal||0),0),o=e/p.length,s=r/p.length,n=p.filter(h=>h.calculatedMetrics.hasViolation).length/p.length*100,c=p[0]?.calculatedMetrics?.proteinRequirement??g.protein??110,y=g.fat??150,j=a(f==="today"?"home.today":f==="7days"?"history.past7days":f==="30days"?"history.past30days":"history.allPeriod");return t.jsxs("div",{style:{backgroundColor:"white",padding:"1rem",borderRadius:"12px",marginBottom:"1.5rem",border:"1px solid #e5e7eb",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:[t.jsxs("h2",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"1rem",color:"#1f2937"},children:[j,a("history.summaryOf")]}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem",marginBottom:"1rem"},children:[t.jsx(i,{label:a("history.averageProtein"),currentDailyTotal:o,target:c,color:"#3b82f6",unit:"g"}),t.jsx(i,{label:a("history.averageFat"),currentDailyTotal:s,target:y,color:"#3b82f6",unit:"g"})]}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.75rem",backgroundColor:"#f9fafb",borderRadius:"8px"},children:[t.jsx("div",{style:{fontSize:"12px",color:"#6b7280"},children:a("history.recordedDays")}),t.jsxs("div",{style:{fontSize:"18px",fontWeight:"bold",color:"#1f2937"},children:[W.totalDays,a("history.days")]})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.75rem",backgroundColor:"#f9fafb",borderRadius:"8px"},children:[t.jsx("div",{style:{fontSize:"12px",color:"#6b7280"},children:a("history.violationRate")}),t.jsxs("div",{style:{fontSize:"18px",fontWeight:"bold",color:n===0?"#34C759":n<20?"#f59e0b":"#dc2626"},children:[n.toFixed(0),"%"]})]})]})]})})(),D==="logs"&&t.jsx(t.Fragment,{children:p.length===0?t.jsxs("div",{className:"history-screen-empty",children:[t.jsx("div",{className:"history-screen-empty-text",children:a("history.noLogs")}),t.jsx("div",{className:"history-screen-empty-subtext",children:a("history.noDataDescription")}),t.jsx("div",{style:{marginTop:"1rem",fontSize:"14px",color:"var(--color-text-secondary)"},children:"üí° „Éõ„Éº„É†ÁîªÈù¢„Åã„Çâ„Äå+ È£üÂìÅ„ÇíËøΩÂä†„Äç„Éú„Çø„É≥„Çí„Çø„ÉÉ„Éó„Åó„Å¶„ÄÅÈ£ü„Åπ„ÅüÈ£üÂìÅ„ÇíË®òÈå≤„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ"})]}):t.jsx("div",{className:"history-screen-logs",children:p.map(e=>{const r=B.has(e.date);return t.jsxs("div",{className:"history-screen-log-wrapper",children:[t.jsxs("div",{className:`history-screen-log-item ${r?"expanded":""}`,onClick:()=>A(e.date),children:[t.jsxs("div",{className:"history-screen-log-header",children:[t.jsx("div",{className:"history-screen-log-date",children:X(e.date)}),t.jsxs("div",{className:"history-screen-log-actions",children:[t.jsx("button",{className:"history-screen-delete-button",onClick:o=>{o.stopPropagation(),Y(e.date)},title:a("common.delete"),children:"üóëÔ∏è"}),t.jsx("span",{className:"history-screen-expand-icon",children:r?"‚ñº":"‚ñ∂"})]})]}),t.jsxs("div",{className:"history-screen-log-summary",children:[t.jsxs("span",{className:"history-screen-log-summary-text",children:[e.fuel.length,a("history.items"),": ",e.fuel.map(o=>o.item).join(", ")]}),(()=>{const o=e.calculatedMetrics.animalEffectiveProtein??e.calculatedMetrics.effectiveProtein??0,s=e.calculatedMetrics.fatTotal||0,d=e.calculatedMetrics.proteinRequirement||110,n=150,m=o>=d,c=s>=n;return t.jsxs("span",{style:{fontSize:"14px",marginLeft:"0.5rem"},children:[m?"‚úÖ":"‚ö†Ô∏è","P:",o.toFixed(0),"g"," ",c?"‚úÖ":"‚ö†Ô∏è","F:",s.toFixed(0),"g"]})})(),e.calculatedMetrics.hasViolation&&t.jsxs("span",{style:{fontSize:"12px",fontWeight:"bold",color:"#dc2626",marginLeft:"0.5rem",padding:"0.25rem 0.5rem",backgroundColor:"#fef2f2",borderRadius:"4px"},children:["‚ö†Ô∏è ",a("history.violation")]}),e.recoveryProtocol&&t.jsxs("span",{className:"history-screen-recovery-badge",children:["‚ö†Ô∏è ",a("history.recovery")]})]}),!r&&t.jsx("button",{onClick:o=>{o.stopPropagation(),A(e.date)},style:{marginTop:"0.5rem",padding:"0.5rem 1rem",fontSize:"14px",backgroundColor:"#f3f4f6",color:"#374151",border:"1px solid #e5e7eb",borderRadius:"6px",cursor:"pointer",width:"100%",textAlign:"center"},children:a("history.viewDetails")})]}),r&&t.jsxs(t.Fragment,{children:[D==="logs"&&t.jsx("div",{className:"history-screen-detail",children:t.jsxs("div",{className:"history-screen-detail-section",children:[t.jsxs("div",{className:"history-screen-detail-label",children:[a("history.foodsEaten"),":"]}),e.fuel.map((o,s)=>{const d=U(o),n=d!==null;return t.jsxs("div",{className:"history-screen-food-item",style:{marginTop:"0.25rem",display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.375rem",backgroundColor:n?"#fffbeb":"var(--color-bg-secondary)",borderRadius:"4px",border:n?"1px solid #fbbf24":"1px solid var(--color-border)"},children:[t.jsxs("span",{children:[n&&"‚≠ê ",d?.photoUrl&&"üì∑ ","‚Ä¢ ",o.item," (",o.amount,o.unit,")"]}),t.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[t.jsx("button",{onClick:m=>{m.stopPropagation(),n?window.confirm(`${o.item}„Çí„ÅäÊ∞ó„Å´ÂÖ•„Çä„Åã„ÇâÂâäÈô§„Åó„Åæ„Åô„ÅãÔºü`)&&ue(d.id):me(o)},style:{padding:"0.25rem 0.5rem",fontSize:"12px",backgroundColor:n?"#fbbf24":"#d1d5db",color:n?"white":"#374151",border:"none",borderRadius:"4px",cursor:"pointer"},title:n?"„ÅäÊ∞ó„Å´ÂÖ•„Çä„Åã„ÇâÂâäÈô§":"„ÅäÊ∞ó„Å´ÂÖ•„Çä„Å´ËøΩÂä†",children:n?"‚≠ê":"‚òÜ"}),n&&t.jsx("button",{onClick:m=>{m.stopPropagation(),k(d),M(!0)},style:{padding:"0.25rem 0.5rem",fontSize:"12px",backgroundColor:d.photoUrl?"#10b981":"#d1d5db",color:d.photoUrl?"white":"#374151",border:"none",borderRadius:"4px",cursor:"pointer"},title:d.photoUrl?"ÂÜôÁúü„ÇíÂ§âÊõ¥":"ÂÜôÁúü„ÇíËøΩÂä†",children:"üì∑"}),t.jsx("button",{onClick:async m=>{if(m.stopPropagation(),window.confirm(`${o.item} (${o.amount}${o.unit})„ÇíÂâäÈô§„Åó„Åæ„Åô„ÅãÔºü`))try{const c=e.fuel.filter((j,h)=>h!==s),y={...e,fuel:c,calculatedMetrics:ge(c,l)};await pe(y),await x()}catch(c){he(c,{date:e.date}),alert(a("history.deleteFailed"))}},style:{padding:"0.25rem 0.5rem",fontSize:"12px",backgroundColor:"#6b7280",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},title:a("common.delete"),children:"üóëÔ∏è"}),t.jsx("button",{onClick:m=>{m.stopPropagation(),ee(o)},style:{padding:"0.25rem 0.5rem",fontSize:"12px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},title:"Èáè„ÇíÁ∑®ÈõÜ",children:"‚úèÔ∏è"})]})]},s)})]})}),r&&t.jsx("div",{className:"history-screen-detail",children:t.jsxs("div",{className:"history-screen-detail-section",style:{marginBottom:"0.5rem"},children:[t.jsx("div",{className:"history-screen-detail-label",style:{fontSize:"13px",fontWeight:"bold",marginBottom:"0.25rem",color:"#1f2937"},children:"Ê†ÑÈ§äÁ¥†„Ç≤„Éº„Ç∏"}),(()=>{const o=e.calculatedMetrics.animalEffectiveProtein??e.calculatedMetrics.effectiveProtein??0,s=e.calculatedMetrics.fatTotal||0,d=e.calculatedMetrics.proteinRequirement??g.protein??110,n=g.fat??150,m=V[e.date]||!1,c=y=>({protein:"#3b82f6",fat:"#3b82f6",zinc:"#06b6d4",magnesium:"#06b6d4",iron:"#06b6d4",potassium:"#10b981",sodium:"#10b981"})[y]||"#06b6d4";return t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.25rem"},children:[t.jsx(i,{label:"„Çø„É≥„Éë„ÇØË≥™ÔºàÊúâÂäπÔºâ",currentDailyTotal:o,target:d,color:c("protein"),unit:"g"}),t.jsx(i,{label:"ËÑÇË≥™",currentDailyTotal:s,target:n,color:c("fat"),unit:"g"}),!m&&t.jsx("button",{onClick:y=>{y.stopPropagation(),P(j=>({...j,[e.date]:!0}))},style:{marginTop:"0.5rem",padding:"0.5rem 1rem",fontSize:"14px",backgroundColor:"#f3f4f6",color:"#374151",border:"1px solid #e5e7eb",borderRadius:"6px",cursor:"pointer",width:"100%",textAlign:"center"},children:"Ë©≥Á¥∞Ë°®Á§∫ ‚Üí"}),m&&t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.25rem",marginTop:"0.5rem",padding:"0.5rem",borderRadius:"8px"},children:[t.jsx(i,{label:"„Éä„Éà„É™„Ç¶„É†",currentDailyTotal:e.calculatedMetrics.sodiumTotal||0,target:g.sodium||5e3,color:"#06b6d4",unit:"mg",nutrientKey:"sodium"}),t.jsx(i,{label:"„Ç´„É™„Ç¶„É†",currentDailyTotal:e.calculatedMetrics.potassiumTotal||0,target:g.potassium||4500,color:"#06b6d4",unit:"mg",nutrientKey:"potassium"}),t.jsx(i,{label:"„Éû„Ç∞„Éç„Ç∑„Ç¶„É†",currentDailyTotal:e.calculatedMetrics.magnesiumTotal||0,target:g.magnesium||600,color:"#06b6d4",unit:"mg",nutrientKey:"magnesium"}),t.jsx(i,{label:"‰∫úÈâõÔºàÊúâÂäπÔºâ",currentDailyTotal:e.calculatedMetrics.effectiveZinc||0,target:g.zinc||11,color:"#06b6d4",unit:"mg",nutrientKey:"zinc"}),t.jsx(i,{label:"ÈâÑÂàÜÔºàÊúâÂäπÔºâ",currentDailyTotal:e.calculatedMetrics.effectiveIron||0,target:g.iron||8,color:"#06b6d4",unit:"mg",nutrientKey:"iron"}),t.jsx(i,{label:"„Ç´„É´„Ç∑„Ç¶„É†",currentDailyTotal:e.calculatedMetrics.calciumTotal||0,target:1e3,color:"#06b6d4",unit:"mg",nutrientKey:"calcium"}),t.jsx(i,{label:"„É™„É≥",currentDailyTotal:e.calculatedMetrics.phosphorusTotal||0,target:700,color:"#06b6d4",unit:"mg",nutrientKey:"phosphorus"}),t.jsx(i,{label:"„Çª„É¨„É≥",currentDailyTotal:e.calculatedMetrics.seleniumTotal||0,target:55,color:"#06b6d4",unit:"Œºg",nutrientKey:"selenium"}),t.jsx(i,{label:"ÈäÖ",currentDailyTotal:e.calculatedMetrics.copperTotal||0,target:.9,color:"#06b6d4",unit:"mg",nutrientKey:"copper"}),t.jsx(i,{label:"„Éû„É≥„Ç¨„É≥",currentDailyTotal:e.calculatedMetrics.manganeseTotal||0,target:2.3,color:"#06b6d4",unit:"mg",nutrientKey:"manganese"}),t.jsx(i,{label:"„É®„Ç¶Á¥†",currentDailyTotal:e.calculatedMetrics.iodineTotal||0,target:g.iodine||150,color:"#06b6d4",unit:"Œºg",nutrientKey:"iodine"}),t.jsx(i,{label:"„Éì„Çø„Éü„É≥AÔºàÊúâÂäπÔºâ",currentDailyTotal:e.calculatedMetrics.effectiveVitaminA||0,target:g.vitamin_a||5e3,color:"#f59e0b",unit:"IU",nutrientKey:"vitamin_a"}),t.jsx(i,{label:"„Éì„Çø„Éü„É≥D",currentDailyTotal:e.calculatedMetrics.vitaminDTotal||0,target:g.vitamin_d||2e3,color:"#f59e0b",unit:"IU",nutrientKey:"vitamin_d"}),t.jsx(i,{label:"„Éì„Çø„Éü„É≥K2",currentDailyTotal:e.calculatedMetrics.vitaminK2Total||0,target:g.vitamin_k2||200,color:"#f59e0b",unit:"Œºg",nutrientKey:"vitamin_k2"}),t.jsx(i,{label:"„Éì„Çø„Éü„É≥E",currentDailyTotal:e.calculatedMetrics.vitaminETotal||0,target:15,color:"#f59e0b",unit:"mg",nutrientKey:"vitamin_e"}),t.jsx(i,{label:"„Éì„Çø„Éü„É≥B12",currentDailyTotal:e.calculatedMetrics.vitaminB12Total||0,target:g.vitamin_b12||2.4,color:"#10b981",unit:"Œºg",nutrientKey:"vitamin_b12"}),t.jsx(i,{label:"„Éì„Çø„Éü„É≥B1",currentDailyTotal:e.calculatedMetrics.vitaminB1Total||0,target:1.2,color:"#10b981",unit:"mg",nutrientKey:"vitamin_b1"}),t.jsx(i,{label:"„Éì„Çø„Éü„É≥B2",currentDailyTotal:e.calculatedMetrics.vitaminB2Total||0,target:1.3,color:"#10b981",unit:"mg",nutrientKey:"vitamin_b2"}),t.jsx(i,{label:"„Éì„Çø„Éü„É≥B3",currentDailyTotal:e.calculatedMetrics.vitaminB3Total||0,target:16,color:"#10b981",unit:"mg",nutrientKey:"vitamin_b3"}),t.jsx(i,{label:"„Éì„Çø„Éü„É≥B6",currentDailyTotal:e.calculatedMetrics.vitaminB6Total||0,target:1.3,color:"#10b981",unit:"mg",nutrientKey:"vitamin_b6"}),t.jsx(i,{label:"„Éì„Çø„Éü„É≥B7Ôºà„Éì„Ç™„ÉÅ„É≥Ôºâ",currentDailyTotal:e.calculatedMetrics.vitaminB7Total||0,target:30,color:"#10b981",unit:"Œºg",nutrientKey:"vitamin_b7"}),t.jsx(i,{label:"„Éì„Çø„Éü„É≥B9ÔºàËëâÈÖ∏Ôºâ",currentDailyTotal:e.calculatedMetrics.vitaminB9Total||0,target:400,color:"#10b981",unit:"Œºg",nutrientKey:"vitamin_b9"}),t.jsx(i,{label:"„Éì„Çø„Éü„É≥B5Ôºà„Éë„É≥„Éà„ÉÜ„É≥ÈÖ∏Ôºâ",currentDailyTotal:e.calculatedMetrics.vitaminB5Total||0,target:5,color:"#10b981",unit:"mg",nutrientKey:"vitamin_b5"}),t.jsx(i,{label:"„Ç≥„É™„É≥",currentDailyTotal:e.calculatedMetrics.cholineTotal||0,target:g.choline||550,color:"#8b5cf6",unit:"mg",nutrientKey:"choline"}),t.jsx(i,{label:"„Çø„Ç¶„É™„É≥",currentDailyTotal:e.calculatedMetrics.taurineTotal||0,target:500,color:"#8b5cf6",unit:"mg",nutrientKey:"taurine"}),t.jsx(i,{label:"„Ç™„É°„Ç¨3",currentDailyTotal:e.calculatedMetrics.omega3Total||0,target:2,color:"#8b5cf6",unit:"g",nutrientKey:"omega3"}),t.jsx(i,{label:"„Ç™„É°„Ç¨6",currentDailyTotal:e.calculatedMetrics.omega6Total||0,target:5,color:"#8b5cf6",unit:"g",nutrientKey:"omega6"}),t.jsxs("div",{style:{marginTop:"1rem",paddingTop:"1rem",borderTop:"1px solid #e5e7eb"},children:[t.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:"#ef4444",marginBottom:"0.5rem"},children:"ÊäóÊ†ÑÈ§äÁ¥†"}),t.jsx(i,{label:"„Éï„Ç£„ÉÅ„É≥ÈÖ∏",currentDailyTotal:e.calculatedMetrics.phytatesTotal||0,target:0,color:"#ef4444",unit:"mg",nutrientKey:"phytates"}),t.jsx(i,{label:"„Ç∑„É•„Ç¶ÈÖ∏",currentDailyTotal:e.calculatedMetrics.oxalatesTotal||0,target:0,color:"#ef4444",unit:"mg",nutrientKey:"oxalates"}),t.jsx(i,{label:"„É¨„ÇØ„ÉÅ„É≥",currentDailyTotal:e.calculatedMetrics.lectinsTotal||0,target:0,color:"#ef4444",unit:"mg",nutrientKey:"lectins"})]}),t.jsx("button",{onClick:y=>{y.stopPropagation(),P(j=>({...j,[e.date]:!1}))},style:{marginTop:"0.5rem",padding:"0.5rem 1rem",fontSize:"14px",backgroundColor:"#f3f4f6",color:"#374151",border:"1px solid #e5e7eb",borderRadius:"6px",cursor:"pointer",width:"100%",textAlign:"center"},children:"Ë©≥Á¥∞„ÇíÈñâ„Åò„Çã ‚Üë"})]})]})})()]})}),!1]})]},e.date)})})}),q&&C&&t.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},onClick:()=>R(!1),children:t.jsxs("div",{style:{backgroundColor:"white",borderRadius:"16px",padding:"2rem",maxWidth:"400px",width:"90%",maxHeight:"90vh",overflow:"auto"},onClick:e=>e.stopPropagation(),children:[t.jsx("h2",{style:{fontSize:"20px",fontWeight:"bold",marginBottom:"1.5rem"},children:a("home.confirmAdd")}),t.jsxs("div",{style:{marginBottom:"1.5rem"},children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",fontSize:"16px"},children:C.item}),t.jsxs("div",{style:{marginBottom:"1rem",fontSize:"14px",color:"#6b7280"},children:[a("home.originalAmount"),": ",C.amount,C.unit]}),t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:a("home.changeAmount")}),t.jsx("input",{type:"number",value:b,onChange:e=>K(e.target.value),placeholder:C.amount.toString(),style:{width:"100%",padding:"0.75rem",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"16px"},autoFocus:!0}),t.jsxs("div",{style:{fontSize:"12px",color:"#6b7280",marginTop:"0.25rem"},children:["Âçò‰Ωç: ",C.unit]})]}),t.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end"},children:[t.jsx("button",{onClick:()=>R(!1),style:{padding:"0.75rem 1.5rem",backgroundColor:"#f3f4f6",color:"#374151",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"16px",fontWeight:"600"},children:a("common.cancel")}),t.jsx("button",{onClick:()=>{const e=Number(b);!isNaN(e)&&e>0&&(te(C,e),R(!1),L(null))},disabled:!b||isNaN(Number(b))||Number(b)<=0,style:{padding:"0.75rem 1.5rem",backgroundColor:!b||isNaN(Number(b))||Number(b)<=0?"#d1d5db":"#dc2626",color:"white",border:"none",borderRadius:"8px",cursor:!b||isNaN(Number(b))||Number(b)<=0?"not-allowed":"pointer",fontSize:"16px",fontWeight:"600",transition:"background-color 0.2s"},children:"Ê±∫ÂÆö"})]})]})}),Q&&v&&t.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},onClick:()=>{M(!1),k(null)},children:t.jsxs("div",{style:{backgroundColor:"white",borderRadius:"16px",padding:"2rem",maxWidth:"500px",width:"90%",maxHeight:"90vh",overflow:"auto"},onClick:e=>e.stopPropagation(),children:[t.jsxs("h2",{style:{fontSize:"20px",fontWeight:"bold",marginBottom:"1.5rem"},children:["üì∑ ",v.foodItem.item,"„ÅÆÂÜôÁúü"]}),v.photoUrl&&t.jsxs("div",{style:{marginBottom:"1.5rem"},children:[t.jsx("div",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"0.5rem"},children:"ÁèæÂú®„ÅÆÂÜôÁúü:"}),t.jsx("img",{src:v.photoUrl,alt:v.foodItem.item,style:{width:"100%",maxHeight:"300px",objectFit:"contain",borderRadius:"8px",border:"1px solid #e5e7eb"}})]}),t.jsxs("div",{style:{marginBottom:"1.5rem"},children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",fontSize:"14px"},children:v.photoUrl?"ÂÜôÁúü„ÇíÂ§âÊõ¥:":"ÂÜôÁúü„ÇíËøΩÂä†:"}),t.jsx("input",{type:"file",accept:"image/*",onChange:async e=>{const r=e.target.files?.[0];if(r)try{const o=await be(r);_(v.id,{photoUrl:o}),M(!1),k(null)}catch(o){alert(o instanceof Error?o.message:"ÂÜôÁúü„ÅÆ„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ„Å´Â§±Êïó„Åó„Åæ„Åó„Åü„ÄÇ")}},style:{width:"100%",padding:"0.75rem",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",cursor:"pointer"}}),t.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginTop:"0.5rem"},children:"„Éï„Ç°„Ç§„É´„Çµ„Ç§„Ç∫„ÅØ5MB‰ª•‰∏ã„Å´„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ"})]}),v.photoUrl&&t.jsx("button",{onClick:()=>{window.confirm("ÂÜôÁúü„ÇíÂâäÈô§„Åó„Åæ„Åô„ÅãÔºü")&&(_(v.id,{photoUrl:void 0}),M(!1),k(null))},style:{width:"100%",padding:"0.75rem",marginBottom:"1rem",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"600"},children:"ÂÜôÁúü„ÇíÂâäÈô§"}),t.jsx("button",{onClick:()=>{M(!1),k(null)},style:{width:"100%",padding:"0.75rem",backgroundColor:"#f3f4f6",color:"#374151",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"16px",fontWeight:"600"},children:"Èñâ„Åò„Çã"})]})})]})})}export{Te as default};
