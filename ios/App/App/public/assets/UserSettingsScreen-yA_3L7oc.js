import{u as Ze,a as es,U as u,p as R,D as k,q,g as V,t as He,j as e,H as qe,v as ss,w as Ve,A as is,x as We,y as rs,z as Ge,B as ts,C as Ue,E as ns}from"./index-CvGLKNdl.js";import{r}from"./chart-vendor-BKK2UjWf.js";import"./react-vendor-OvXVS5lI.js";import"./ai-vendor-9LcfXvm6.js";function P(d,i){const o={age:typeof i=="number"&&i>50?"高齢者はビタミンDとタンパク質の必要量が増加します":"",activityLevel:{active:"活動的な人はタンパク質・脂質・マグネシウムの必要量が増加します",moderate:"中程度の活動量では、タンパク質と脂質がやや増加します",sedentary:"低活動量では、標準的な必要量が適用されます"},isPregnant:typeof i=="boolean"&&i?"妊娠中はタンパク質・鉄分・マグネシウムの必要量が増加します":"",isBreastfeeding:typeof i=="boolean"&&i?"授乳中はタンパク質・マグネシウムの必要量が増加します":"",isPostMenopause:typeof i=="boolean"&&i?"閉経後は鉄分の必要量が8mgに減少します（月経がないため）":"",stressLevel:{high:"高ストレス時はマグネシウムの必要量が増加します",moderate:"中程度のストレスでは、標準的な必要量が適用されます",low:"低ストレスでは、標準的な必要量が適用されます"},sleepHours:typeof i=="number"&&i<7?"睡眠不足はマグネシウムとコルチゾールに影響します":"",exerciseIntensity:{intense:"激しい運動ではタンパク質・脂質・マグネシウムの必要量が増加します",moderate:"中程度の運動では、タンパク質と脂質がやや増加します",light:"軽い運動では、標準的な必要量が適用されます",none:"運動なしでは、標準的な必要量が適用されます"},thyroidFunction:{hypothyroid:"甲状腺機能低下症ではヨウ素とセレンの必要量が増加します",hyperthyroid:"甲状腺機能亢進症ではヨウ素とセレンの必要量が増加します",normal:""},sunExposureFrequency:{none:"日光暴露なしではビタミンDサプリメントが必要になる可能性があります",rare:"まれな日光暴露ではビタミンDの必要量が増加します",occasional:"時々の日光暴露では、標準的な必要量が適用されます",daily:"毎日の日光暴露では、ビタミンD合成が十分な可能性があります"}}[d];return typeof o=="string"?o:typeof o=="object"&&o!==null&&typeof i=="string"&&o[i]||""}const os={short:155,tall:220,grande:330,venti:415,trenta:475},je=60;function ls(d){const i=d.toLowerCase().trim();for(const[h,p]of Object.entries(os))if((i.includes("スタバ")||i.includes("starbucks"))&&i.includes(h))return{caffeineMg:p,description:`スタバ ${h}サイズ: ${p}mg`};const c=i.match(/(\d+)\s*杯/);if(c){const h=parseInt(c[1],10),p=h*200,W=p/100*je;return{caffeineMg:Math.round(W),description:`コーヒー${h}杯（${p}ml）: 約${Math.round(W)}mg`}}const o=i.match(/(\d+)\s*ml/);if(o){const h=parseInt(o[1],10),p=h/100*je;return{caffeineMg:Math.round(p),description:`コーヒー${h}ml: 約${Math.round(p)}mg`}}return{caffeineMg:Math.round(200/100*je),description:`コーヒー1杯（200ml）: 約${Math.round(200/100*je)}mg（推定）`}}const cs=[{key:"gender",category:"basic",priority:"required",weight:3},{key:"goal",category:"basic",priority:"required",weight:3},{key:"metabolicStatus",category:"basic",priority:"required",weight:3},{key:"height",category:"basic",priority:"recommended",weight:2},{key:"weight",category:"basic",priority:"recommended",weight:2},{key:"age",category:"basic",priority:"recommended",weight:2},{key:"mode",category:"basic",priority:"recommended",weight:2},{key:"bodyComposition",category:"body",priority:"recommended",weight:2},{key:"activityLevel",category:"body",priority:"recommended",weight:2},{key:"exerciseIntensity",category:"body",priority:"recommended",weight:2},{key:"exerciseFrequency",category:"body",priority:"recommended",weight:2},{key:"stressLevel",category:"health",priority:"recommended",weight:2},{key:"sleepHours",category:"health",priority:"recommended",weight:2},{key:"thyroidFunction",category:"health",priority:"recommended",weight:2},{key:"sunExposureFrequency",category:"health",priority:"recommended",weight:2},{key:"isPregnant",category:"health",priority:"recommended",weight:2},{key:"isBreastfeeding",category:"health",priority:"recommended",weight:2},{key:"isPostMenopause",category:"health",priority:"recommended",weight:2},{key:"dairyTolerance",category:"lifestyle",priority:"optional",weight:1},{key:"digestiveIssues",category:"lifestyle",priority:"optional",weight:1},{key:"caffeineIntake",category:"lifestyle",priority:"optional",weight:1},{key:"alcoholFrequency",category:"lifestyle",priority:"optional",weight:1},{key:"supplementMagnesium",category:"lifestyle",priority:"optional",weight:1},{key:"supplementVitaminD",category:"lifestyle",priority:"optional",weight:1},{key:"supplementIodine",category:"lifestyle",priority:"optional",weight:1},{key:"inflammationLevel",category:"disease",priority:"optional",weight:1},{key:"mentalHealthStatus",category:"disease",priority:"optional",weight:1},{key:"diabetes",category:"disease",priority:"optional",weight:1},{key:"autoimmuneConditions",category:"disease",priority:"optional",weight:1},{key:"chronicDiseases",category:"disease",priority:"optional",weight:1},{key:"vitaminDLevel",category:"lab",priority:"optional",weight:1},{key:"b12Level",category:"lab",priority:"optional",weight:1},{key:"ferritin",category:"lab",priority:"optional",weight:1},{key:"omega3Index",category:"lab",priority:"optional",weight:1}];function as(d,i){if(!d)return!1;const c=d[i];return c==null?!1:typeof c=="boolean"?!0:typeof c=="number"?c>0:typeof c=="string"?c.trim()!=="":Array.isArray(c)?c.length>0:typeof c=="object"}function ds(d){if(!d)return 0;let i=0,c=0;for(const o of cs)i+=o.weight,as(d,o.key)&&(c+=o.weight);return i===0?0:Math.round(c/i*100)}const A={gender:{label:"性別",priority:"required"},height:{label:"身長",priority:"recommended"},weight:{label:"体重",priority:"recommended"},goal:{label:"目標",priority:"required"},metabolicStatus:{label:"代謝状態",priority:"required"},mode:{label:"ダイエットモード",priority:"recommended"},dairyTolerance:{label:"乳糖耐性",priority:"optional"}},ps=d=>{switch(d){case"required":return"必須";case"recommended":return"推奨";case"optional":return"任意"}},ms=d=>{switch(d){case"required":return"profile-screen-priority-required";case"recommended":return"profile-screen-priority-recommended";case"optional":return"profile-screen-priority-optional"}};function bs(){const{t:d}=Ze(),{userProfile:i,loadUserProfile:c}=es(),[o,h]=r.useState(i?.gender||"male"),[p,W]=r.useState(i?.height?.toString()||""),[g,Ie]=r.useState(i?.weight?.toString()||""),[w,Te]=r.useState(i?.goal||u.HEALING),[le,Ee]=r.useState(i?.dairyTolerance??!1),[O,Fe]=r.useState(i?.metabolicStatus||R.TRANSITIONING),[E,$e]=r.useState(i?.mode||k.STRICT_CARNIVORE),[C,Le]=r.useState(i?.age?.toString()||""),[F,ce]=r.useState(i?.activityLevel||"moderate"),[G,Ne]=r.useState(i?.isPregnant??!1),[U,ve]=r.useState(i?.isBreastfeeding??!1),[J,Be]=r.useState(i?.isPostMenopause??!1),[z,ae]=r.useState(()=>i?.stressLevel==="low"?3:i?.stressLevel==="moderate"?5:i?.stressLevel==="high"?8:5),K=(s=>s<=3?"low":s<=7?"moderate":"high")(z),[x,Me]=r.useState(i?.sleepHours?.toString()||""),[N,Y]=r.useState(i?.exerciseIntensity||"none"),[I,Q]=r.useState(i?.exerciseFrequency||"none"),[v,de]=r.useState(i?.thyroidFunction||"normal"),[S,X]=r.useState(i?.sunExposureFrequency||"occasional"),[Z,ee]=r.useState(q()),[Se,se]=r.useState(V()),[pe,Re]=r.useState(i?.digestiveIssues??!1),[_,me]=r.useState(i?.inflammationLevel||"low"),[D,he]=r.useState(i?.mentalHealthStatus||"good"),[ie,Pe]=r.useState(i?.supplementMagnesium??!1),[re,Ae]=r.useState(i?.supplementVitaminD??!1),[fe,Oe]=r.useState(i?.supplementIodine??!1),[$,te]=r.useState(i?.alcoholFrequency||"none"),[L,ne]=r.useState(i?.caffeineIntake||"none"),[H,ke]=r.useState(i?.bodyComposition||"average"),[y,Je]=r.useState(typeof i?.bodyComposition=="object"&&"bodyFatPercentage"in i.bodyComposition?i.bodyComposition.bodyFatPercentage.toString():""),[b,ue]=r.useState(!1),[T,ze]=r.useState(i?.metabolicStressIndicators||[]),[ge,_e]=r.useState(""),[oe,fs]=r.useState(i?.customNutrientTargets?Object.fromEntries(Object.entries(i.customNutrientTargets).map(([s,t])=>[s,typeof t=="number"?{mode:"manual",value:t}:t])):{}),[we,Ke]=r.useState(!1),[a,Ye]=r.useState(()=>{const s=localStorage.getItem("profile_collapsed_sections");return s?JSON.parse(s):{basicInfo:!1,goal:!1,metabolicStatus:!1,dietMode:!1,dairyTolerance:!0,stressLevel:!1,recommended:!1,optional:!0,femaleSpecific:!0}}),[xe,Qe]=r.useState(()=>{const s=localStorage.getItem("profile_hidden_sections");return s?JSON.parse(s):{}}),j=s=>{Ye(t=>{const l={...t,[s]:!t[s]};return localStorage.setItem("profile_collapsed_sections",JSON.stringify(l)),l})},ye=s=>{Qe(t=>{const l={...t,[s]:!t[s]};return localStorage.setItem("profile_hidden_sections",JSON.stringify(l)),l})},Ce=r.useRef(null);r.useEffect(()=>{c()},[c]);const be=r.useCallback(async()=>{Ce.current&&clearTimeout(Ce.current),Ce.current=setTimeout(async()=>{const s={gender:o,height:p?parseFloat(p):void 0,weight:g?parseFloat(g):void 0,goal:w,dairyTolerance:le,metabolicStatus:O,mode:E,age:C?parseInt(C,10):void 0,activityLevel:F,isPregnant:o==="female"?G:void 0,isBreastfeeding:o==="female"?U:void 0,isPostMenopause:o==="female"?J:void 0,stressLevel:K,sleepHours:x?Number(x):void 0,exerciseIntensity:N,exerciseFrequency:I,thyroidFunction:v,sunExposureFrequency:S,digestiveIssues:pe,inflammationLevel:_,mentalHealthStatus:D,supplementMagnesium:ie,supplementVitaminD:re,supplementIodine:fe,alcoholFrequency:$,caffeineIntake:L,bodyComposition:b&&y?{bodyFatPercentage:parseFloat(y)}:H,metabolicStressIndicators:T.length>0?T:void 0,customNutrientTargets:Object.keys(oe).length>0?Object.fromEntries(Object.entries(oe).map(([t,l])=>[t,l.mode==="auto"?{mode:"auto"}:{mode:"manual",value:l.value}])):void 0};try{await He(s)}catch{}},1e3)},[o,p,g,w,le,O,E,C,F,G,U,J,K,x,N,I,v,S,pe,_,D,ie,re,fe,$,L,b,y,H,T,oe]),De=r.useRef(!0);r.useEffect(()=>{if(De.current){De.current=!1;return}be()},[be]),r.useEffect(()=>{i&&(h(i.gender||"male"),W(i.height?.toString()||""),Ie(i.weight?.toString()||""),Te(i.goal||u.HEALING),Ee(i.dairyTolerance??!1),Fe(i.metabolicStatus||R.TRANSITIONING),$e(i.mode||k.STRICT_CARNIVORE),Le(i.age?.toString()||""),ce(i.activityLevel||"moderate"),Ne(i.isPregnant??!1),ve(i.isBreastfeeding??!1),Be(i.isPostMenopause??!1),i.stressLevel==="low"?ae(3):i.stressLevel==="high"?ae(8):ae(5),Me(i.sleepHours?.toString()||""),Y(i.exerciseIntensity||"none"),Q(i.exerciseFrequency||"none"),de(i.thyroidFunction||"normal"),X(i.sunExposureFrequency||"occasional"),Re(i.digestiveIssues??!1),me(i.inflammationLevel||"low"),he(i.mentalHealthStatus||"good"),Pe(i.supplementMagnesium??!1),Ae(i.supplementVitaminD??!1),Oe(i.supplementIodine??!1),te(i.alcoholFrequency||"none"),ne(i.caffeineIntake||"none"))},[i]),r.useEffect(()=>{i&&be()},[be,i]);const Xe=async()=>{const s={gender:o,height:p?parseFloat(p):void 0,weight:g?parseFloat(g):void 0,goal:w,dairyTolerance:le,metabolicStatus:O,mode:E,age:C?parseInt(C,10):void 0,activityLevel:F,isPregnant:o==="female"?G:void 0,isBreastfeeding:o==="female"?U:void 0,isPostMenopause:o==="female"?J:void 0,stressLevel:K,sleepHours:x?Number(x):void 0,exerciseIntensity:N,exerciseFrequency:I,thyroidFunction:v,sunExposureFrequency:S,digestiveIssues:pe,inflammationLevel:_,mentalHealthStatus:D,supplementMagnesium:ie,supplementVitaminD:re,supplementIodine:fe,alcoholFrequency:$,caffeineIntake:L,bodyComposition:b&&y?{bodyFatPercentage:parseFloat(y)}:H,metabolicStressIndicators:T.length>0?T:void 0,customNutrientTargets:Object.keys(oe).length>0?Object.fromEntries(Object.entries(oe).map(([t,l])=>[t,l.mode==="manual"&&l.value!==void 0?l.value:0])):void 0,...i};await He(s),await c(),window.dispatchEvent(new CustomEvent("navigateToScreen",{detail:"profile"}))},B=s=>e.jsxs("div",{className:"profile-screen-field-header",children:[e.jsx("span",{className:"profile-screen-field-label",children:s.label}),e.jsx("span",{className:`profile-screen-priority-badge ${ms(s.priority)}`,children:ps(s.priority)})]});return e.jsx("div",{className:"profile-screen-container",children:e.jsxs("div",{className:"profile-screen-content",children:[e.jsxs("div",{className:"screen-header",children:[e.jsx("button",{onClick:()=>window.dispatchEvent(new CustomEvent("navigateToScreen",{detail:"profile"})),className:"back-button",children:"←"}),e.jsxs("div",{className:"screen-header-content",children:[e.jsx("h1",{className:"screen-header-title",children:"ユーザー設定"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginTop:"0.25rem"},children:[e.jsxs("span",{style:{fontSize:"18px",fontWeight:"bold",color:"#3b82f6"},children:[ds(i),"%"]}),e.jsx("span",{style:{fontSize:"10px",color:"#9ca3af",lineHeight:"1.2"},children:"このアプリで最大限最適化されています"})]})]})]}),e.jsxs("div",{className:"profile-screen-section",children:[e.jsxs("div",{className:"profile-screen-section-header",onClick:()=>j("basicInfo"),children:[e.jsx("h2",{className:"profile-screen-section-title",children:"基本情報"}),e.jsx("div",{className:"profile-screen-section-toggle",children:e.jsx("span",{className:`profile-screen-collapse-icon ${a.basicInfo?"collapsed":""}`,children:"▼"})})]}),!a.basicInfo&&e.jsxs("div",{className:"profile-screen-section-content",children:[e.jsxs("div",{className:"profile-screen-input-group",children:[B(A.gender),e.jsxs("div",{className:"profile-screen-button-row",children:[e.jsx("button",{className:`profile-screen-option-button ${o==="male"?"active":""}`,onClick:()=>h("male"),children:"男性"}),e.jsx("button",{className:`profile-screen-option-button ${o==="female"?"active":""}`,onClick:()=>h("female"),children:"女性"})]})]}),e.jsxs("div",{className:"profile-screen-input-group",children:[B(A.height),e.jsxs("div",{className:"profile-screen-number-input-row",children:[e.jsx("input",{type:"number",className:"profile-screen-number-input",value:p,onChange:s=>W(s.target.value),placeholder:"170",min:"0",max:"300"}),e.jsx("span",{className:"profile-screen-unit",children:"cm"})]})]}),e.jsxs("div",{className:"profile-screen-input-group",children:[B(A.weight),e.jsxs("div",{className:"profile-screen-number-input-row",children:[e.jsx("input",{type:"number",className:"profile-screen-number-input",value:g,onChange:s=>Ie(s.target.value),placeholder:"70",min:"0",max:"500",step:"0.1"}),e.jsx("span",{className:"profile-screen-unit",children:"kg"})]})]}),g&&e.jsxs("div",{className:"profile-screen-input-group",style:{marginTop:"1rem"},children:[e.jsxs("div",{className:"profile-screen-field-header",children:[e.jsx("span",{className:"profile-screen-field-label",children:"体組成（LBM計算用）"}),e.jsx("span",{className:"profile-screen-priority-badge profile-screen-priority-recommended",children:"推奨"})]}),e.jsx("p",{style:{fontSize:"0.85rem",color:"#666",marginBottom:"0.75rem"},children:"タンパク質目標値 = LBM（除脂肪体重）× 2.2g"}),e.jsxs("div",{className:"profile-screen-button-row",children:[e.jsx("button",{className:`profile-screen-option-button ${!b&&H==="muscular"?"active":""}`,onClick:()=>{ke("muscular"),ue(!1)},children:"筋肉質/引き締まっている"}),e.jsx("button",{className:`profile-screen-option-button ${!b&&H==="average"?"active":""}`,onClick:()=>{ke("average"),ue(!1)},children:"平均的"}),e.jsx("button",{className:`profile-screen-option-button ${!b&&H==="high_fat"?"active":""}`,onClick:()=>{ke("high_fat"),ue(!1)},children:"体脂肪多め"})]}),e.jsx("div",{style:{marginTop:"0.75rem"},children:e.jsx("button",{onClick:()=>ue(!b),className:`toggle-button ${b?"active":""}`,children:b?"体脂肪率入力モード":"体脂肪率を直接入力"})}),b&&e.jsxs("div",{style:{marginTop:"0.75rem"},children:[e.jsx("label",{style:{fontSize:"14px",color:"#374151",display:"block",marginBottom:"0.5rem"},children:"体脂肪率 (%)"}),e.jsxs("div",{className:"profile-screen-number-input-row",children:[e.jsx("input",{type:"number",className:"profile-screen-number-input",value:y,onChange:s=>Je(s.target.value),placeholder:"20",min:"0",max:"50",step:"0.1"}),e.jsx("span",{className:"profile-screen-unit",children:"%"})]}),y&&g&&e.jsxs("p",{style:{fontSize:"0.85rem",color:"#666",marginTop:"0.5rem"},children:["LBM係数: ",((1-parseFloat(y)/100)*100).toFixed(1),"%",e.jsx("br",{}),"LBM:"," ",(parseFloat(g)*(1-parseFloat(y)/100)).toFixed(1),"kg",e.jsx("br",{}),"タンパク質目標値:"," ",(parseFloat(g)*(1-parseFloat(y)/100)*2.2).toFixed(1),"g"]})]})]}),e.jsxs("div",{className:"profile-screen-input-group",children:[e.jsxs("div",{className:"profile-screen-field-header",children:[e.jsx("span",{className:"profile-screen-field-label",children:"年齢"}),e.jsx("span",{className:"profile-screen-priority-badge profile-screen-priority-recommended",children:"推奨"})]}),e.jsxs("div",{className:"profile-screen-number-input-row",children:[e.jsx("input",{type:"number",className:"profile-screen-number-input",value:C,onChange:s=>Le(s.target.value),placeholder:"30",min:"0",max:"120",step:"1"}),e.jsx("span",{className:"profile-screen-unit",children:"歳"})]})]}),e.jsxs("div",{className:"profile-screen-input-group",children:[e.jsxs("div",{className:"profile-screen-field-header",children:[e.jsx("span",{className:"profile-screen-field-label",children:"活動量"}),e.jsx("span",{className:"profile-screen-priority-badge profile-screen-priority-recommended",children:"推奨"})]}),e.jsxs("div",{className:"profile-screen-button-row",children:[e.jsx("button",{className:`profile-screen-option-button ${F==="sedentary"?"active":""}`,onClick:()=>ce("sedentary"),children:"低い（デスクワーク中心）"}),e.jsx("button",{className:`profile-screen-option-button ${F==="moderate"?"active":""}`,onClick:()=>ce("moderate"),children:"中程度（週3-4回の運動）"}),e.jsx("button",{className:`profile-screen-option-button ${F==="active"?"active":""}`,onClick:()=>ce("active"),children:"高い（毎日運動）"})]})]})]})]}),e.jsxs("div",{className:"profile-screen-section",children:[e.jsxs("div",{className:"profile-screen-section-header",onClick:()=>j("goal"),children:[e.jsx("h2",{className:"profile-screen-section-title",children:"目標"}),e.jsx("div",{className:"profile-screen-section-toggle",children:e.jsx("span",{className:`profile-screen-collapse-icon ${a.goal?"collapsed":""}`,children:"▼"})})]}),!a.goal&&e.jsxs("div",{className:"profile-screen-section-content",children:[B(A.goal),e.jsxs("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"0.5rem"},children:[w===u.HEALING&&"炎症の軽減、腸の修復、慢性的な健康問題の改善を目指します。",w===u.PERFORMANCE&&"筋力、持久力、認知機能の向上を最優先とします。",w===u.WEIGHT_LOSS&&"代謝の最適化と体脂肪の減少を目指します。",w===u.AUTOIMMUNE_HEALING&&"自己免疫疾患の症状緩和と免疫システムの再調整を目指します。"]}),e.jsx("div",{className:"profile-screen-button-row",children:Object.values(u).map(s=>e.jsxs("button",{className:`profile-screen-option-button ${w===s?"active":""}`,onClick:()=>Te(s),children:[s===u.HEALING&&"治癒・回復",s===u.PERFORMANCE&&"パフォーマンス向上",s===u.WEIGHT_LOSS&&"減量",s===u.AUTOIMMUNE_HEALING&&"自己免疫疾患の改善"]},s))})]})]}),e.jsxs("div",{className:"profile-screen-section",children:[e.jsxs("div",{className:"profile-screen-section-header",onClick:()=>j("metabolicStatus"),children:[e.jsxs("h2",{className:"profile-screen-section-title",children:["代謝状態",e.jsx(qe,{text:"適応済み: ケトーシスに完全適応済み。低炭水化物状態で安定。\\n移行中: ケトーシスへの移行中。適応過程で一時的な不調の可能性。"})]}),e.jsx("div",{className:"profile-screen-section-toggle",children:e.jsx("span",{className:`profile-screen-collapse-icon ${a.metabolicStatus?"collapsed":""}`,children:"▼"})})]}),!a.metabolicStatus&&e.jsxs("div",{className:"profile-screen-section-content",children:[B(A.metabolicStatus),e.jsxs("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"0.5rem"},children:[O===R.ADAPTED&&"ケトーシスに完全適応済み。低炭水化物状態で安定。",O===R.TRANSITIONING&&"ケトーシスへの移行中。適応過程で一時的な不調の可能性。"]}),e.jsx("div",{className:"profile-screen-button-row",children:Object.values(R).map(s=>e.jsxs("button",{className:`profile-screen-option-button ${O===s?"active":""}`,onClick:()=>Fe(s),children:[s===R.ADAPTED&&"適応済み",s===R.TRANSITIONING&&"移行中"]},s))})]})]}),e.jsxs("div",{className:"profile-screen-section",children:[e.jsxs("div",{className:"profile-screen-section-header",onClick:()=>j("dietMode"),children:[e.jsxs("h2",{className:"profile-screen-section-title",children:["ダイエットモード",e.jsx(qe,{text:"厳格な肉食: 動物性食品のみ。植物性食品は一切摂取しない。\\nケトボア: 主に動物性食品。少量の低炭水化物植物（アボカド、ナッツなど）を許可。\\nライオンダイエット: 牛肉と塩のみ。最も厳格な形式。"})]}),e.jsx("div",{className:"profile-screen-section-toggle",children:e.jsx("span",{className:`profile-screen-collapse-icon ${a.dietMode?"collapsed":""}`,children:"▼"})})]}),!a.dietMode&&e.jsxs("div",{className:"profile-screen-section-content",children:[B(A.mode),e.jsxs("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"0.5rem"},children:[E===k.STRICT_CARNIVORE&&"動物性食品のみ。植物性食品は一切摂取しない。",E===k.KETOVORE&&"主に動物性食品。少量の低炭水化物植物（アボカド、ナッツなど）を許可。",E===k.LION_DIET&&"牛肉と塩のみ。最も厳格な形式。"]}),e.jsx("div",{className:"profile-screen-button-row",children:Object.values(k).map(s=>e.jsxs("button",{className:`profile-screen-option-button ${E===s?"active":""}`,onClick:()=>$e(s),children:[s===k.STRICT_CARNIVORE&&"厳格な肉食",s===k.KETOVORE&&"ケトボア",s===k.LION_DIET&&"ライオンダイエット"]},s))})]})]}),e.jsxs("div",{className:"profile-screen-section",children:[e.jsxs("div",{className:"profile-screen-section-header",onClick:()=>j("dairyTolerance"),children:[e.jsx("h2",{className:"profile-screen-section-title",children:"乳糖耐性"}),e.jsx("div",{className:"profile-screen-section-toggle",children:e.jsx("span",{className:`profile-screen-collapse-icon ${a.dairyTolerance?"collapsed":""}`,children:"▼"})})]}),!a.dairyTolerance&&e.jsx("div",{className:"profile-screen-section-content",children:e.jsxs("div",{className:"profile-screen-switch-row",children:[B(A.dairyTolerance),e.jsxs("label",{className:"profile-screen-switch",children:[e.jsx("input",{type:"checkbox",checked:le,onChange:s=>Ee(s.target.checked)}),e.jsx("span",{className:"profile-screen-switch-slider"})]})]})})]}),o==="female"&&!xe.femaleSpecific&&e.jsxs("div",{className:"profile-screen-section",children:[e.jsxs("div",{className:"profile-screen-section-header",onClick:()=>j("femaleSpecific"),children:[e.jsx("h2",{className:"profile-screen-section-title",children:"女性特有の条件（検査不要）"}),e.jsxs("div",{className:"profile-screen-section-toggle",children:[e.jsx("span",{className:"profile-screen-section-visibility-toggle",onClick:s=>{s.stopPropagation(),ye("femaleSpecific")},title:d("settings.hideSection"),children:"非表示"}),e.jsx("span",{className:`profile-screen-collapse-icon ${a.femaleSpecific?"collapsed":""}`,children:"▼"})]})]}),!a.femaleSpecific&&e.jsxs("div",{className:"profile-screen-section-content",children:[e.jsx("p",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"1rem"},children:"これらの条件は鉄分・タンパク質・マグネシウムの必要量に影響します（自己申告で分かります）"}),e.jsxs("div",{className:"profile-screen-switch-row",children:[e.jsxs("div",{className:"profile-screen-switch-label-group",children:[e.jsx("label",{className:"profile-screen-switch-label",children:"妊娠中"}),e.jsx("p",{className:"profile-screen-switch-description",children:"タンパク質・鉄分・マグネシウムの必要量が増加します"})]}),e.jsxs("label",{className:"profile-screen-switch",children:[e.jsx("input",{type:"checkbox",checked:G,onChange:s=>{Ne(s.target.checked),s.target.checked&&ve(!1)}}),e.jsx("span",{className:"profile-screen-switch-slider"})]})]}),e.jsxs("div",{className:"profile-screen-switch-row",style:{marginTop:"1rem"},children:[e.jsxs("div",{className:"profile-screen-switch-label-group",children:[e.jsx("label",{className:"profile-screen-switch-label",children:"授乳中"}),e.jsx("p",{className:"profile-screen-switch-description",children:"タンパク質・マグネシウムの必要量が増加します"})]}),e.jsxs("label",{className:"profile-screen-switch",children:[e.jsx("input",{type:"checkbox",checked:U,onChange:s=>{ve(s.target.checked),s.target.checked&&Ne(!1)}}),e.jsx("span",{className:"profile-screen-switch-slider"})]})]}),e.jsxs("div",{className:"profile-screen-switch-row",style:{marginTop:"1rem"},children:[e.jsxs("div",{className:"profile-screen-switch-label-group",children:[e.jsx("label",{className:"profile-screen-switch-label",children:"閉経後"}),e.jsx("p",{className:"profile-screen-switch-description",children:"鉄分の必要量が8mgに減少します（月経がないため）"})]}),e.jsxs("label",{className:"profile-screen-switch",children:[e.jsx("input",{type:"checkbox",checked:J,onChange:s=>Be(s.target.checked)}),e.jsx("span",{className:"profile-screen-switch-slider"})]})]})]})]}),e.jsxs("div",{className:"profile-screen-section",children:[e.jsxs("div",{className:"profile-screen-section-header",onClick:()=>j("stressLevel"),children:[e.jsx("h2",{className:"profile-screen-section-title",children:"ストレスレベル"}),e.jsx("div",{className:"profile-screen-section-toggle",children:e.jsx("span",{className:`profile-screen-collapse-icon ${a.stressLevel?"collapsed":""}`,children:"▼"})})]}),!a.stressLevel&&e.jsxs("div",{className:"profile-screen-section-content",children:[e.jsx("p",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"1rem"},children:P("stressLevel",K)}),e.jsxs("div",{className:"profile-screen-input-group",children:[e.jsx("label",{className:"profile-screen-field-label",children:"ストレスレベル (0-10)"}),e.jsxs("div",{className:"profile-screen-number-input-row",children:[e.jsx("input",{type:"number",className:"profile-screen-number-input",value:z,onChange:s=>{const t=parseInt(s.target.value);!isNaN(t)&&t>=0&&t<=10&&ae(t)},min:"0",max:"10",step:"1"}),e.jsx("span",{className:"profile-screen-unit",children:"/10"})]}),e.jsxs("p",{className:"profile-screen-field-description",style:{marginTop:"0.5rem",fontSize:"0.85rem",color:"#666"},children:[z<=3&&"低いストレス",z>3&&z<=7&&"中程度のストレス",z>7&&"高いストレス"]})]})]})]}),!xe.recommended&&e.jsxs("div",{className:"profile-screen-section",children:[e.jsxs("div",{className:"profile-screen-section-header",onClick:()=>j("recommended"),children:[e.jsx("h2",{className:"profile-screen-section-title",children:"推奨項目（検査不要）"}),e.jsxs("div",{className:"profile-screen-section-toggle",children:[e.jsx("span",{className:"profile-screen-section-visibility-toggle",onClick:s=>{s.stopPropagation(),ye("recommended")},title:d("settings.hideSection"),children:"非表示"}),e.jsx("span",{className:`profile-screen-collapse-icon ${a.recommended?"collapsed":""}`,children:"▼"})]})]}),!a.recommended&&e.jsxs("div",{className:"profile-screen-section-content",children:[e.jsx("p",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"1rem"},children:"これらの項目は栄養素の必要量に大きく影響します（自己申告で分かります）"}),e.jsxs("div",{className:"profile-screen-input-group",style:{marginBottom:"1.5rem"},children:[e.jsxs("div",{className:"profile-screen-field-header",children:[e.jsx("span",{className:"profile-screen-field-label",children:"睡眠時間"}),e.jsx("span",{className:"profile-screen-priority-badge profile-screen-priority-recommended",children:"推奨"}),P("sleepHours",x)&&e.jsx("span",{className:"profile-screen-field-description",children:P("sleepHours",x)})]}),e.jsxs("div",{className:"profile-screen-number-input-row",children:[e.jsx("input",{type:"number",className:"profile-screen-number-input",value:x,onChange:s=>Me(s.target.value),placeholder:"7",min:"0",max:"24",step:"0.5"}),e.jsx("span",{className:"profile-screen-unit",children:"時間/日"})]})]}),e.jsxs("div",{className:"profile-screen-input-group",style:{marginBottom:"1.5rem"},children:[e.jsxs("div",{className:"profile-screen-field-header",children:[e.jsx("span",{className:"profile-screen-field-label",children:"運動強度"}),e.jsx("span",{className:"profile-screen-priority-badge profile-screen-priority-recommended",children:"推奨"}),e.jsx("span",{className:"profile-screen-field-description",children:P("exerciseIntensity",N)})]}),e.jsxs("div",{className:"profile-screen-button-row",children:[e.jsx("button",{className:`profile-screen-option-button ${N==="none"?"active":""}`,onClick:()=>Y("none"),children:"なし"}),e.jsx("button",{className:`profile-screen-option-button ${N==="light"?"active":""}`,onClick:()=>Y("light"),children:"軽い"}),e.jsx("button",{className:`profile-screen-option-button ${N==="moderate"?"active":""}`,onClick:()=>Y("moderate"),children:"中程度"}),e.jsx("button",{className:`profile-screen-option-button ${N==="intense"?"active":""}`,onClick:()=>Y("intense"),children:"激しい"})]})]}),e.jsxs("div",{className:"profile-screen-input-group",style:{marginBottom:"1.5rem"},children:[e.jsxs("div",{className:"profile-screen-field-header",children:[e.jsx("span",{className:"profile-screen-field-label",children:"運動頻度"}),e.jsx("span",{className:"profile-screen-priority-badge profile-screen-priority-recommended",children:"推奨"}),e.jsx("span",{className:"profile-screen-field-description",children:"週あたりの運動回数"})]}),e.jsxs("div",{className:"profile-screen-button-row",children:[e.jsx("button",{className:`profile-screen-option-button ${I==="none"?"active":""}`,onClick:()=>Q("none"),children:"なし"}),e.jsx("button",{className:`profile-screen-option-button ${I==="1-2"?"active":""}`,onClick:()=>Q("1-2"),children:"週1-2回"}),e.jsx("button",{className:`profile-screen-option-button ${I==="3-4"?"active":""}`,onClick:()=>Q("3-4"),children:"週3-4回"}),e.jsx("button",{className:`profile-screen-option-button ${I==="5+"?"active":""}`,onClick:()=>Q("5+"),children:"週5回以上"})]})]}),e.jsxs("div",{className:"profile-screen-input-group",style:{marginBottom:"1.5rem"},children:[e.jsxs("div",{className:"profile-screen-field-header",children:[e.jsx("span",{className:"profile-screen-field-label",children:"甲状腺機能"}),e.jsx("span",{className:"profile-screen-priority-badge profile-screen-priority-recommended",children:"推奨"}),P("thyroidFunction",v)&&e.jsx("span",{className:"profile-screen-field-description",children:P("thyroidFunction",v)})]}),e.jsxs("div",{className:"profile-screen-button-row",children:[e.jsx("button",{className:`profile-screen-option-button ${v==="normal"?"active":""}`,onClick:()=>de("normal"),children:"正常"}),e.jsx("button",{className:`profile-screen-option-button ${v==="hypothyroid"?"active":""}`,onClick:()=>de("hypothyroid"),children:"機能低下"}),e.jsx("button",{className:`profile-screen-option-button ${v==="hyperthyroid"?"active":""}`,onClick:()=>de("hyperthyroid"),children:"機能亢進"})]})]}),e.jsxs("div",{className:"profile-screen-input-group",style:{marginBottom:"1.5rem"},children:[e.jsxs("div",{className:"profile-screen-field-header",children:[e.jsx("span",{className:"profile-screen-field-label",children:"日光暴露頻度"}),e.jsx("span",{className:"profile-screen-priority-badge profile-screen-priority-recommended",children:"推奨"}),e.jsx("span",{className:"profile-screen-field-description",children:P("sunExposureFrequency",S)})]}),e.jsxs("div",{className:"profile-screen-button-row",children:[e.jsx("button",{className:`profile-screen-option-button ${S==="none"?"active":""}`,onClick:()=>X("none"),children:"なし"}),e.jsx("button",{className:`profile-screen-option-button ${S==="rare"?"active":""}`,onClick:()=>X("rare"),children:"まれ"}),e.jsx("button",{className:`profile-screen-option-button ${S==="occasional"?"active":""}`,onClick:()=>X("occasional"),children:"時々"}),e.jsx("button",{className:`profile-screen-option-button ${S==="daily"?"active":""}`,onClick:()=>X("daily"),children:"毎日"})]})]})]})]}),!xe.optional&&e.jsxs("div",{className:"profile-screen-section",children:[e.jsxs("div",{className:"profile-screen-section-header",onClick:()=>j("optional"),children:[e.jsx("h2",{className:"profile-screen-section-title",children:"任意項目（検査不要）"}),e.jsxs("div",{className:"profile-screen-section-toggle",children:[e.jsx("span",{className:"profile-screen-section-visibility-toggle",onClick:s=>{s.stopPropagation(),ye("optional")},title:d("settings.hideSection"),children:"非表示"}),e.jsx("span",{className:`profile-screen-collapse-icon ${a.optional?"collapsed":""}`,children:"▼"})]})]}),!a.optional&&e.jsxs("div",{className:"profile-screen-section-content",children:[e.jsx("p",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"1rem"},children:"より詳細なパーソナライズのために任意で設定できます（自己申告で分かります）"}),e.jsxs("div",{className:"profile-screen-switch-row",style:{marginBottom:"1rem"},children:[e.jsxs("div",{className:"profile-screen-switch-label-group",children:[e.jsx("label",{className:"profile-screen-switch-label",children:"消化器系の問題"}),e.jsx("p",{className:"profile-screen-switch-description"})]}),e.jsxs("label",{className:"profile-screen-switch",children:[e.jsx("input",{type:"checkbox",checked:pe,onChange:s=>Re(s.target.checked)}),e.jsx("span",{className:"profile-screen-switch-slider"})]})]}),e.jsxs("div",{className:"profile-screen-input-group",style:{marginBottom:"1.5rem"},children:[e.jsxs("div",{className:"profile-screen-field-header",children:[e.jsx("span",{className:"profile-screen-field-label",children:"炎症レベル"}),e.jsx("span",{className:"profile-screen-priority-badge profile-screen-priority-optional",children:"任意"})]}),e.jsxs("div",{className:"profile-screen-button-row",children:[e.jsx("button",{className:`profile-screen-option-button ${_==="low"?"active":""}`,onClick:()=>me("low"),children:"低い"}),e.jsx("button",{className:`profile-screen-option-button ${_==="moderate"?"active":""}`,onClick:()=>me("moderate"),children:"中程度"}),e.jsx("button",{className:`profile-screen-option-button ${_==="high"?"active":""}`,onClick:()=>me("high"),children:"高い"})]})]}),e.jsxs("div",{className:"profile-screen-input-group",style:{marginBottom:"1.5rem"},children:[e.jsxs("div",{className:"profile-screen-field-header",children:[e.jsx("span",{className:"profile-screen-field-label",children:"メンタルヘルス状態"}),e.jsx("span",{className:"profile-screen-priority-badge profile-screen-priority-optional",children:"任意"})]}),e.jsxs("div",{className:"profile-screen-button-row",children:[e.jsx("button",{className:`profile-screen-option-button ${D==="good"?"active":""}`,onClick:()=>he("good"),children:"良好"}),e.jsx("button",{className:`profile-screen-option-button ${D==="moderate"?"active":""}`,onClick:()=>he("moderate"),children:"中程度"}),e.jsx("button",{className:`profile-screen-option-button ${D==="poor"?"active":""}`,onClick:()=>he("poor"),children:"不良"})]})]}),e.jsxs("div",{className:"profile-screen-input-group",style:{marginBottom:"1.5rem"},children:[e.jsxs("div",{className:"profile-screen-field-header",children:[e.jsx("span",{className:"profile-screen-field-label",children:"サプリメント摂取状況"}),e.jsx("span",{className:"profile-screen-priority-badge profile-screen-priority-optional",children:"任意"})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[e.jsxs("div",{className:"profile-screen-switch-row",children:[e.jsx("div",{className:"profile-screen-switch-label-group",children:e.jsx("label",{className:"profile-screen-switch-label",children:"マグネシウム"})}),e.jsxs("label",{className:"profile-screen-switch",children:[e.jsx("input",{type:"checkbox",checked:ie,onChange:s=>Pe(s.target.checked)}),e.jsx("span",{className:"profile-screen-switch-slider"})]})]}),e.jsxs("div",{className:"profile-screen-switch-row",children:[e.jsx("div",{className:"profile-screen-switch-label-group",children:e.jsx("label",{className:"profile-screen-switch-label",children:"ビタミンD"})}),e.jsxs("label",{className:"profile-screen-switch",children:[e.jsx("input",{type:"checkbox",checked:re,onChange:s=>Ae(s.target.checked)}),e.jsx("span",{className:"profile-screen-switch-slider"})]})]}),e.jsxs("div",{className:"profile-screen-switch-row",children:[e.jsx("div",{className:"profile-screen-switch-label-group",children:e.jsx("label",{className:"profile-screen-switch-label",children:"ヨウ素"})}),e.jsxs("label",{className:"profile-screen-switch",children:[e.jsx("input",{type:"checkbox",checked:fe,onChange:s=>Oe(s.target.checked)}),e.jsx("span",{className:"profile-screen-switch-slider"})]})]})]})]}),e.jsxs("div",{className:"profile-screen-input-group",style:{marginBottom:"1.5rem"},children:[e.jsxs("div",{className:"profile-screen-field-header",children:[e.jsx("span",{className:"profile-screen-field-label",children:"アルコール摂取頻度"}),e.jsx("span",{className:"profile-screen-priority-badge profile-screen-priority-optional",children:"任意"})]}),e.jsxs("div",{className:"profile-screen-button-row",children:[e.jsx("button",{className:`profile-screen-option-button ${$==="none"?"active":""}`,onClick:()=>te("none"),children:"なし"}),e.jsx("button",{className:`profile-screen-option-button ${$==="rare"?"active":""}`,onClick:()=>te("rare"),children:"まれ"}),e.jsx("button",{className:`profile-screen-option-button ${$==="weekly"?"active":""}`,onClick:()=>te("weekly"),children:"週に数回"}),e.jsx("button",{className:`profile-screen-option-button ${$==="daily"?"active":""}`,onClick:()=>te("daily"),children:"毎日"})]})]}),e.jsxs("div",{className:"profile-screen-input-group",style:{marginBottom:"1.5rem"},children:[e.jsxs("div",{className:"profile-screen-field-header",children:[e.jsx("span",{className:"profile-screen-field-label",children:"カフェイン摂取量"}),e.jsx("span",{className:"profile-screen-priority-badge profile-screen-priority-optional",children:"任意"})]}),e.jsxs("div",{className:"profile-screen-button-row",children:[e.jsx("button",{className:`profile-screen-option-button ${L==="none"?"active":""}`,onClick:()=>ne("none"),children:"なし"}),e.jsx("button",{className:`profile-screen-option-button ${L==="low"?"active":""}`,onClick:()=>ne("low"),children:"低い"}),e.jsx("button",{className:`profile-screen-option-button ${L==="moderate"?"active":""}`,onClick:()=>ne("moderate"),children:"中程度"}),e.jsx("button",{className:`profile-screen-option-button ${L==="high"?"active":""}`,onClick:()=>ne("high"),children:"高い"})]})]})]})]}),e.jsxs("div",{className:"profile-screen-section",children:[e.jsxs("div",{className:"profile-screen-section-header",onClick:()=>j("metabolicStress"),children:[e.jsx("h2",{className:"profile-screen-section-title",children:"代謝ストレス指標（Phase 4）"}),e.jsxs("div",{className:"profile-screen-section-toggle",children:[e.jsx("span",{className:"profile-screen-section-visibility-toggle",onClick:s=>{s.stopPropagation(),ye("metabolicStress")},title:"このセクションを非表示にする",children:"非表示"}),e.jsx("span",{className:`profile-screen-collapse-icon ${a.metabolicStress?"collapsed":""}`,children:"▼"})]})]}),!a.metabolicStress&&!xe.metabolicStress&&e.jsxs("div",{className:"profile-screen-section-content",children:[e.jsx("p",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"1rem"},children:"該当する項目を選択すると、栄養素目標値が自動調整されます"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[{id:"morning_fatigue",label:"朝起きるのが辛い / 疲労感が抜けない",adjustment:"ナトリウム +1500mg（副腎疲労疑い）"},{id:"night_wake",label:"睡眠中に目が覚める / 悪夢を見る",adjustment:"マグネシウム +200mg、夕食の脂質推奨（夜間低血糖疑い）"},{id:"postmeal_sleepy",label:"食後に眠くなる",adjustment:"インスリン抵抗性あり（フラグ保存）"},{id:"coffee_high",label:"コーヒーを毎日2杯以上飲む",adjustment:"ナトリウム +500mg（Na排出増）",inputType:"coffee"}].map(s=>{const t=s.id==="coffee_high",l=T.includes(s.id);return e.jsx("div",{className:"info-card",children:e.jsxs("label",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:l,onChange:m=>{m.target.checked?ze([...T,s.id]):(ze(T.filter(f=>f!==s.id)),t&&_e(""))},style:{marginTop:"0.25rem"}}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:"500",marginBottom:"0.25rem"},children:s.label}),e.jsx("div",{style:{fontSize:"0.85rem",color:"#666",marginBottom:t&&l?"0.75rem":"0"},children:s.adjustment}),t&&l&&e.jsxs("div",{style:{marginTop:"0.75rem"},children:[e.jsx("label",{style:{fontSize:"14px",color:"#374151",display:"block",marginBottom:"0.5rem"},children:"コーヒー入力（例: スタバのコーヒーShort、コーヒー2杯、コーヒー300ml）"}),e.jsx("input",{type:"text",value:ge,onChange:m=>_e(m.target.value),placeholder:"例: スタバのコーヒーShort、コーヒー2杯、コーヒー300ml",style:{width:"100%",padding:"0.5rem",border:"1px solid #e5e7eb",borderRadius:"4px",fontSize:"14px"}}),ge&&e.jsx("div",{style:{marginTop:"0.5rem",fontSize:"0.85rem",color:"#666"},children:(()=>{try{return`カフェイン量: ${ls(ge).description}`}catch{return`コーヒー入力: ${ge}`}})()})]})]})]})},s.id)})})]})]}),e.jsx("div",{className:"profile-screen-section",children:e.jsxs("div",{className:"nav-item",role:"button",tabIndex:0,"aria-label":"栄養素目標値のカスタマイズ画面に遷移",onClick:()=>{window.dispatchEvent(new CustomEvent("navigateToScreen",{detail:"nutrientCustom"}))},onKeyDown:s=>{(s.key==="Enter"||s.key===" ")&&(s.preventDefault(),window.dispatchEvent(new CustomEvent("navigateToScreen",{detail:"nutrientCustom"})))},children:[e.jsxs("div",{className:"nav-item-content",children:[e.jsx("h2",{className:"nav-item-title",children:"栄養素目標値のカスタマイズ（Phase 5）"}),e.jsx("p",{className:"nav-item-description",children:"各栄養素の目標値を「推奨値（Auto）」か「手動入力（Manual）」かを選択できます"})]}),e.jsx("span",{className:"nav-item-arrow",children:"→"})]})}),e.jsxs("div",{className:"profile-screen-section",children:[e.jsx("button",{onClick:()=>Ke(!we),style:{padding:"0.75rem 1.5rem",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"8px",fontSize:"14px",cursor:"pointer",fontWeight:"500",width:"100%"},children:we?"📊 プレビューを閉じる":"📊 栄養素目標値のプレビュー"}),we&&e.jsxs("div",{style:{marginTop:"1rem",padding:"1rem",backgroundColor:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[e.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600",marginBottom:"0.75rem"},children:"現在の設定による栄養素目標値"}),(()=>{const s=ss({gender:o,age:C?Number(C):void 0,activityLevel:F,isPregnant:G,isBreastfeeding:U,isPostMenopause:J,stressLevel:K,sleepHours:x?Number(x):void 0,exerciseIntensity:N,exerciseFrequency:I,thyroidFunction:v,sunExposureFrequency:S,supplementMagnesium:ie,supplementVitaminD:re});return e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:s.map((t,l)=>e.jsxs("div",{style:{padding:"0.75rem",backgroundColor:"#fff",borderRadius:"6px",border:"1px solid #e5e7eb"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[e.jsxs("span",{style:{fontWeight:"600"},children:[t.nutrient,":"]}),e.jsxs("strong",{style:{fontSize:"1.1rem"},children:[t.value,t.unit]})]}),e.jsxs("div",{style:{fontSize:"14px",color:"#666",lineHeight:"1.6",marginTop:"0.5rem"},children:[e.jsx("p",{style:{margin:"0 0 0.5rem 0"},children:t.humanExplanation}),t.adjustments.length>0&&e.jsxs("div",{style:{marginTop:"0.5rem",paddingTop:"0.5rem",borderTop:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{fontSize:"12px",color:"#888",marginBottom:"0.25rem"},children:"調整内容:"}),t.adjustments.map((m,f)=>e.jsxs("div",{style:{fontSize:"13px",marginLeft:"0.5rem",marginBottom:"0.25rem"},children:["• ",m.reason,": ",m.impact]},f))]})]})]},l))})})()]})]}),e.jsxs("div",{className:"profile-screen-section section-container",children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem",color:"var(--color-text-primary)"},children:"栄養素表示設定"}),e.jsx("p",{style:{fontSize:"0.9rem",color:"var(--color-text-secondary)",marginBottom:"1rem"},children:"各栄養素の表示/非表示を切り替えられます。デフォルトは全部表示です。"}),e.jsxs("div",{className:"button-group",style:{marginBottom:"1.5rem"},children:[e.jsx("button",{onClick:()=>{Ve(!0),ee(q())},className:"toggle-button active",children:"全て表示"}),e.jsx("button",{onClick:()=>{Ve(!1),ee(q())},className:"toggle-button",children:"全て非表示"})]}),["macro","mineral","fatSolubleVitamin","waterSolubleVitamin","other","ratio","antiNutrient","avoid"].map(s=>{const t=is.filter(n=>n.category===s);if(t.length===0)return null;const l={macro:"マクロ栄養素",mineral:"ミネラル",fatSolubleVitamin:"脂溶性ビタミン",waterSolubleVitamin:"水溶性ビタミン",other:"その他",ratio:"比率",antiNutrient:"抗栄養素",avoid:"避けるべき食品"},m=t.every(n=>Z[n.key]),f=t.every(n=>!Z[n.key]);return e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.75rem"},children:[e.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600"},children:l[s]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("button",{onClick:()=>{We(s,!0),ee(q())},disabled:m,style:{padding:"0.25rem 0.75rem",backgroundColor:m?"#d1d5db":"#3b82f6",color:"white",border:"none",borderRadius:"4px",cursor:m?"not-allowed":"pointer",fontSize:"12px"},children:"全て表示"}),e.jsx("button",{onClick:()=>{We(s,!1),ee(q())},disabled:f,style:{padding:"0.25rem 0.75rem",backgroundColor:f?"#d1d5db":"#6b7280",color:"white",border:"none",borderRadius:"4px",cursor:f?"not-allowed":"pointer",fontSize:"12px"},children:"全て非表示"})]})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"0.5rem"},children:t.map(n=>{const M=Z[n.key];return e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem",backgroundColor:M?"#f0f9ff":"#f9fafb",borderRadius:"6px",cursor:"pointer",border:`1px solid ${M?"#3b82f6":"#e5e7eb"}`},children:[e.jsx("input",{type:"checkbox",checked:Z[n.key],onChange:()=>{rs(n.key),ee(q())},style:{cursor:"pointer"}}),e.jsxs("span",{style:{fontSize:"14px",color:Z[n.key]?"#1e40af":"#6b7280"},children:[n.label," ",n.unit&&`(${n.unit})`]})]},n.key)})})]},s)})]}),e.jsxs("div",{className:"profile-screen-section section-container",children:[e.jsx("h2",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"1rem",color:"var(--color-text-primary)"},children:"機能表示設定"}),e.jsx("p",{style:{fontSize:"0.9rem",color:"var(--color-text-secondary)",marginBottom:"1rem"},children:"あらゆる機能の表示/非表示を切り替えられます。デフォルトは全部表示です。"}),e.jsxs("div",{className:"button-group",style:{marginBottom:"1.5rem"},children:[e.jsx("button",{onClick:()=>{Ge(!0),se(V())},style:{padding:"0.5rem 1rem",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:"全て表示"}),e.jsx("button",{onClick:()=>{Ge(!1),se(V())},style:{padding:"0.5rem 1rem",backgroundColor:"#6b7280",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:"全て非表示"})]}),["screenElement","analysis","notification","other"].map(s=>{const t=ts.filter(n=>n.category===s);if(t.length===0)return null;const l={screenElement:"画面要素",analysis:"分析機能",notification:"通知設定",other:"その他"},m=t.every(n=>Se[n.key]),f=t.every(n=>!Se[n.key]);return e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.75rem"},children:[e.jsx("h3",{style:{fontSize:"1rem",fontWeight:"600"},children:l[s]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("button",{onClick:()=>{Ue(s,!0),se(V())},disabled:m,style:{padding:"0.25rem 0.75rem",backgroundColor:m?"#d1d5db":"#3b82f6",color:"white",border:"none",borderRadius:"4px",cursor:m?"not-allowed":"pointer",fontSize:"12px"},children:"全て表示"}),e.jsx("button",{onClick:()=>{Ue(s,!1),se(V())},disabled:f,style:{padding:"0.25rem 0.75rem",backgroundColor:f?"#d1d5db":"#6b7280",color:"white",border:"none",borderRadius:"4px",cursor:f?"not-allowed":"pointer",fontSize:"12px"},children:"全て非表示"})]})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",gap:"0.5rem"},children:t.map(n=>{const M=Se[n.key];return e.jsxs("label",{style:{display:"flex",alignItems:"flex-start",gap:"0.5rem",padding:"0.5rem",backgroundColor:M?"#f0f9ff":"#f9fafb",borderRadius:"6px",cursor:"pointer",border:`1px solid ${M?"#3b82f6":"#e5e7eb"}`},children:[e.jsx("input",{type:"checkbox",checked:M,onChange:()=>{ns(n.key),se(V())},style:{cursor:"pointer",marginTop:"0.25rem"}}),e.jsxs("div",{style:{flex:1},children:[e.jsx("span",{style:{fontSize:"14px",color:M?"#1e40af":"#6b7280",fontWeight:"500"},children:n.label}),n.description&&e.jsx("div",{style:{fontSize:"12px",color:"#9ca3af",marginTop:"0.25rem"},children:n.description})]})]},n.key)})})]},s)})]}),e.jsx("div",{style:{position:"sticky",bottom:0,backgroundColor:"white",padding:"1rem",borderTop:"1px solid #e5e7eb",zIndex:100,marginTop:"2rem"},children:e.jsx("button",{onClick:Xe,style:{width:"100%",padding:"0.75rem",backgroundColor:"#dc2626",color:"white",border:"none",borderRadius:"8px",fontSize:"16px",fontWeight:"600",cursor:"pointer"},onMouseEnter:s=>{s.currentTarget.style.backgroundColor="#b91c1c"},onMouseLeave:s=>{s.currentTarget.style.backgroundColor="#dc2626"},children:"保存"})})]})})}export{bs as default};
