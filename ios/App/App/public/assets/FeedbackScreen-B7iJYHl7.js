import{j as e}from"./index-CvGLKNdl.js";import{r as s}from"./chart-vendor-BKK2UjWf.js";import"./react-vendor-OvXVS5lI.js";import"./ai-vendor-9LcfXvm6.js";function w(){const[t,k]=s.useState("general"),[n,o]=s.useState(""),[c,d]=s.useState(""),[i,u]=s.useState(""),[m,b]=s.useState(!1),[h,f]=s.useState(!1),j=async a=>{if(a.preventDefault(),!c.trim()){alert("メッセージを入力してください");return}b(!0);try{const l=n||"（件名なし）",x=encodeURIComponent(`[CarnivoreOS ${t==="bug"?"Bug Report":t==="feature"?"Feature Request":"Feedback"}] ${l}`),r={type:t,subject:l,message:c,email:i||"（メールアドレスなし）",timestamp:new Date().toISOString(),userAgent:navigator.userAgent,url:window.location.href},p=localStorage.getItem("primal_logic_feedback"),g=p?JSON.parse(p):[];g.push(r),localStorage.setItem("primal_logic_feedback",JSON.stringify(g.slice(-50)));const v=encodeURIComponent(`Type: ${t==="bug"?"Bug Report":t==="feature"?"Feature Request":"General Feedback"}
Subject: ${l||"(No Subject)"}

Message:
${c}

Email: ${i||"(Not provided)"}
Timestamp: ${r.timestamp}
User Agent: ${r.userAgent}
URL: ${r.url}`),N=`mailto:sibuketu12345@gmail.com?subject=${x}&body=${v}`;window.location.href=N,f(!0),o(""),d(""),u(""),setTimeout(()=>{f(!1)},3e3)}catch{alert("フィードバックの送信に失敗しました")}finally{b(!1)}};return e.jsx("div",{className:"feedback-screen",children:e.jsxs("div",{className:"feedback-container",children:[e.jsx("button",{onClick:()=>{window.dispatchEvent(new CustomEvent("navigateToScreen",{detail:"settings"}))},className:"feedback-back-button",children:"← 設定に戻る"}),e.jsx("h1",{className:"feedback-title",children:"フィードバック"}),e.jsx("p",{className:"feedback-description",children:"バグ報告、機能リクエスト、ご意見をお聞かせください。"}),e.jsxs("form",{onSubmit:j,className:"feedback-form",children:[e.jsxs("div",{className:"feedback-form-group",children:[e.jsx("label",{htmlFor:"feedback-type",className:"feedback-label",children:"種類"}),e.jsxs("select",{id:"feedback-type",value:t,onChange:a=>k(a.target.value),className:"feedback-select",children:[e.jsx("option",{value:"general",children:"一般的なフィードバック"}),e.jsx("option",{value:"bug",children:"バグ報告"}),e.jsx("option",{value:"feature",children:"機能リクエスト"})]})]}),e.jsxs("div",{className:"feedback-form-group",children:[e.jsx("label",{htmlFor:"feedback-subject",className:"feedback-label",children:"件名（任意）"}),e.jsx("input",{id:"feedback-subject",type:"text",value:n,onChange:a=>o(a.target.value),className:"feedback-input",placeholder:"例：栄養素の計算が正しくない"})]}),e.jsxs("div",{className:"feedback-form-group",children:[e.jsxs("label",{htmlFor:"feedback-message",className:"feedback-label",children:["メッセージ ",e.jsx("span",{className:"feedback-required",children:"*"})]}),e.jsx("textarea",{id:"feedback-message",value:c,onChange:a=>d(a.target.value),required:!0,className:"feedback-textarea",rows:8,placeholder:"詳細を入力してください..."})]}),e.jsxs("div",{className:"feedback-form-group",children:[e.jsx("label",{htmlFor:"feedback-email",className:"feedback-label",children:"メールアドレス（任意・返信が必要な場合）"}),e.jsx("input",{id:"feedback-email",type:"email",value:i,onChange:a=>u(a.target.value),className:"feedback-input",placeholder:"example@email.com"})]}),e.jsx("button",{type:"submit",disabled:m||!c.trim(),className:"feedback-button",children:m?"送信中...":"送信"})]}),h&&e.jsx("div",{className:"feedback-success",children:"✅ フィードバックを送信しました。ありがとうございます！"})]})})}export{w as default};
