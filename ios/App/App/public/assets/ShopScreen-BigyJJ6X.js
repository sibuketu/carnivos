import{u as x,O as b,j as s}from"./index-CvGLKNdl.js";import{r as o}from"./chart-vendor-BKK2UjWf.js";import"./react-vendor-OvXVS5lI.js";import"./ai-vendor-9LcfXvm6.js";function f({onBack:d}){const{t:a}=x(),{debugMode:c}=b(),[h,l]=o.useState([{id:"dot-ui",name:a("shop.pixelArtUI"),description:a("shop.pixelArtUIDescription"),price:980,icon:"ðŸŽ¨",category:"ui",isPurchased:!1,isDebugFree:!0}]),[p,n]=o.useState(()=>localStorage.getItem("primal_logic_dot_ui_enabled")==="true");o.useEffect(()=>{const e=JSON.parse(localStorage.getItem("primal_logic_shop_purchased")||"[]");l(i=>i.map(t=>({...t,isPurchased:e.includes(t.id)})))},[]),o.useEffect(()=>{const e=()=>{const i=localStorage.getItem("primal_logic_dot_ui_enabled")==="true";n(i)};return window.addEventListener("dotUIChanged",e),()=>{window.removeEventListener("dotUIChanged",e)}},[]);const u=async e=>{if(c&&e.isDebugFree){const i=JSON.parse(localStorage.getItem("primal_logic_shop_purchased")||"[]");i.includes(e.id)||(i.push(e.id),localStorage.setItem("primal_logic_shop_purchased",JSON.stringify(i)),l(t=>t.map(r=>r.id===e.id?{...r,isPurchased:!0}:r)),alert(a("shop.purchaseSuccess",{name:e.name})));return}alert(a("shop.paymentPending"))},m=e=>{e.id==="dot-ui"&&(localStorage.setItem("primal_logic_dot_ui_enabled","true"),n(!0),window.dispatchEvent(new CustomEvent("dotUIChanged")),alert(a("shop.enablePixelArtUISuccess")),window.location.reload())},g=e=>{e.id==="dot-ui"&&(localStorage.removeItem("primal_logic_dot_ui_enabled"),n(!1),window.dispatchEvent(new CustomEvent("dotUIChanged")),alert(a("shop.disablePixelArtUISuccess")),window.location.reload())};return s.jsx("div",{className:"shop-screen-container",children:s.jsxs("div",{className:"shop-screen-content",children:[s.jsxs("div",{className:"screen-header",children:[s.jsx("button",{className:"back-button",onClick:d,"aria-label":a("common.backAriaLabel"),children:"â†"}),s.jsxs("h1",{className:"screen-header-title",children:["ðŸ›ï¸ ",a("shop.title")]})]}),c&&s.jsx("div",{className:"shop-debug-notice",children:s.jsxs("p",{children:["âš ï¸ ",a("shop.debugMode")]})}),s.jsxs("div",{className:"shop-items-section",children:[s.jsx("h2",{className:"shop-section-title",children:a("shop.uiCustomization")}),s.jsx("div",{className:"shop-items-list",children:h.filter(e=>e.category==="ui").map(e=>s.jsxs("div",{className:"shop-item-card",children:[s.jsxs("div",{className:"shop-item-header",children:[s.jsx("span",{className:"shop-item-icon",children:e.icon}),s.jsxs("div",{className:"shop-item-info",children:[s.jsx("h3",{className:"shop-item-name",children:e.name}),s.jsx("p",{className:"shop-item-description",children:e.description})]})]}),s.jsx("div",{className:"shop-item-footer",children:e.isPurchased?s.jsxs("div",{className:"shop-item-actions",children:[e.id==="dot-ui"&&s.jsx(s.Fragment,{children:p?s.jsx("button",{className:"shop-item-disable-button",onClick:()=>g(e),children:a("shop.disablePixelArtUI")}):s.jsx("button",{className:"shop-item-use-button",onClick:()=>m(e),children:a("shop.enablePixelArtUI")})}),s.jsxs("span",{className:"shop-item-purchased-badge",children:["âœ“ ",a("shop.purchased")]})]}):s.jsxs("div",{className:"shop-item-purchase",children:[s.jsx("span",{className:"shop-item-price",children:c&&e.isDebugFree?s.jsx("span",{className:"shop-item-price-free",children:a("shop.freeDebugMode")}):`${a("gift.currency")}${e.price.toLocaleString()}`}),s.jsx("button",{className:"shop-item-purchase-button",onClick:()=>u(e),children:a("shop.purchase")})]})})]},e.id))})]})]})})}export{f as default};
