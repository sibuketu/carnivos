import{u as Z,a as ee,f as te,d as re,j as e,P as oe,Q as ie,R as B,S as P,M as a,T as ne,V as se}from"./index-CvGLKNdl.js";import{r as p}from"./chart-vendor-BKK2UjWf.js";import"./react-vendor-OvXVS5lI.js";import"./ai-vendor-9LcfXvm6.js";const N="primal_logic_recipes";function S(){try{const m=localStorage.getItem(N);return m?JSON.parse(m):[]}catch{return[]}}function ae(m){try{const r=S(),u=new Date().toISOString(),n={...m,id:`recipe_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,createdAt:u,updatedAt:u};return r.push(n),localStorage.setItem(N,JSON.stringify(r)),n}catch(r){throw r}}function le(m,r){try{const u=S(),n=u.findIndex(j=>j.id===m);return n===-1?null:(u[n]={...u[n],...r,updatedAt:new Date().toISOString()},localStorage.setItem(N,JSON.stringify(u)),u[n])}catch(u){throw u}}function de(m){try{const r=S(),u=r.filter(n=>n.id!==m);return u.length===r.length?!1:(localStorage.setItem(N,JSON.stringify(u)),!0)}catch(r){throw r}}function ge({onBack:m}){const{t:r}=Z(),{addFood:u,userProfile:n}=ee(),[j,_]=p.useState([]),[Q,f]=p.useState(!1),[w,y]=p.useState(!1),[K,W]=p.useState(null),[F,R]=p.useState(""),[A,k]=p.useState(""),[d,T]=p.useState([]),[E,g]=p.useState(!0),[o,l]=p.useState({foodName:"",displayName:"",type:"animal",amount:100,unit:"g",nutrients:{},isAnalyzing:!1,error:null,showAdvancedNutrients:!1,aiFollowupQuestions:[],showFollowupInput:!1,followupAnswers:{},loadingTip:null,isTipSavedState:!1}),[v,H]=p.useState(!1),[z,C]=p.useState([]);p.useEffect(()=>{I()},[]);const I=()=>{const t=S();_(t)},q=()=>{R(""),k(""),T([]),g(!0),C([]),l({foodName:"",displayName:"",type:"animal",amount:100,unit:"g",nutrients:{},isAnalyzing:!1,error:null,showAdvancedNutrients:!1,aiFollowupQuestions:[],showFollowupInput:!1,followupAnswers:{},loadingTip:null,isTipSavedState:!1}),f(!0)},U=t=>{W(t),R(t.name),k(t.description||""),T([...t.foods]),g(!0),C([]),l({foodName:"",displayName:"",type:"animal",amount:100,unit:"g",nutrients:{},isAnalyzing:!1,error:null,showAdvancedNutrients:!1,aiFollowupQuestions:[],showFollowupInput:!1,followupAnswers:{},loadingTip:null,isTipSavedState:!1}),y(!0)},J=async()=>{if(!o.foodName.trim()){l(i=>({...i,error:r("customFood.enterFoodName")}));return}l(i=>({...i,isAnalyzing:!0,error:null}));const t=o.loadingTip?P(o.loadingTip.id):ne();l(i=>({...i,loadingTip:t,isTipSavedState:B(t.id)}));try{const i=await se(o.foodName,Object.keys(o.followupAnswers).length>0?o.followupAnswers:void 0),c=o.amount/100,b={};i.nutrients&&Object.entries(i.nutrients).forEach(([D,X])=>{b[D]=X*c}),l(D=>({...D,foodName:i.foodName,displayName:i.foodName,type:i.type==="plant"?"animal":i.type,nutrients:b,aiFollowupQuestions:i.followupQuestions||[],showFollowupInput:i.followupQuestions&&i.followupQuestions.length>0||!1,loadingTip:null}))}catch(i){l(c=>({...c,error:i instanceof Error?i.message:r("customFood.analyzeFailed")}))}finally{l(i=>({...i,isAnalyzing:!1}))}},G=()=>{if(!o.foodName.trim()){l(c=>({...c,error:r("customFood.enterFoodName")}));return}const t=o.amount/100,i={item:o.displayName||o.foodName,amount:o.amount,unit:o.unit,type:o.type,nutrients:Object.fromEntries(Object.entries(o.nutrients).map(([c,b])=>[c,(b||0)*t]))};T([...d,i]),l({foodName:"",displayName:"",type:"animal",amount:100,unit:"g",nutrients:{},isAnalyzing:!1,error:null,showAdvancedNutrients:!1,aiFollowupQuestions:[],showFollowupInput:!1,followupAnswers:{},loadingTip:null,isTipSavedState:!1})},L=()=>{if(d.length===0){alert(r("recipe.addFood"));return}g(!1)},V=()=>{if(!F.trim()){alert(r("recipe.nameRequired"));return}if(d.length===0){alert(r("recipe.addFood"));return}try{w&&K?le(K.id,{name:F,description:A,foods:d}):ae({name:F,description:A,foods:d}),I(),f(!1),y(!1),W(null),g(!0)}catch{alert(r("recipe.saveFailed"))}},Y=t=>{if(window.confirm(r("recipe.deleteConfirm")))try{de(t),I()}catch{alert(r("recipe.deleteFailed"))}},$=t=>{t.foods.forEach(i=>{u(i)}),alert(r("recipe.added",{name:t.name})),m()},s=(t,i)=>{l(c=>({...c,nutrients:{...c.nutrients,[t]:i===void 0||i===0?void 0:i}}))},h=p.useMemo(()=>d.length===0?null:te(d,n),[d,n]),x=p.useMemo(()=>re(n?.gender,n?.age,n?.activityLevel,n?.isPregnant,n?.isBreastfeeding,n?.isPostMenopause,n?.stressLevel,n?.sleepHours,n?.exerciseIntensity,n?.exerciseFrequency,n?.thyroidFunction,n?.sunExposureFrequency,n?.digestiveIssues,n?.inflammationLevel,n?.mentalHealthStatus,n?.supplementMagnesium,n?.supplementVitaminD,n?.supplementIodine,n?.alcoholFrequency,n?.caffeineIntake,n?.daysOnCarnivore,n?.carnivoreStartDate,n?.forceAdaptationMode,n?.bodyComposition,n?.weight,n?.metabolicStressIndicators,n?.customNutrientTargets?Object.fromEntries(Object.entries(n.customNutrientTargets).map(([t,i])=>[t,typeof i=="number"?{mode:"manual",value:i}:i])):void 0),[n]),M=p.useMemo(()=>{if(!h||!x)return[];const t=i=>({protein:"#ef4444",fat:"#f97316",iron:"#dc2626",magnesium:"#3b82f6",vitamin_d:"#fbbf24",sodium:"#10b981",potassium:"#8b5cf6",zinc:"#6366f1"})[i]||"#78716c";return[{key:"protein",label:"ã‚¿ãƒ³ãƒ‘ã‚¯è³ª",current:h.effectiveProtein||0,target:x.protein,unit:"g",color:t("protein")},{key:"fat",label:"è„‚è³ª",current:h.fatTotal||0,target:x.fat,unit:"g",color:t("fat")},{key:"iron",label:"é‰„åˆ†",current:h.effectiveIron||0,target:x.iron,unit:"mg",color:t("iron")},{key:"magnesium",label:"ãƒžã‚°ãƒã‚·ã‚¦ãƒ ",current:h.magnesiumTotal||0,target:x.magnesium,unit:"mg",color:t("magnesium")},{key:"sodium",label:"ãƒŠãƒˆãƒªã‚¦ãƒ ",current:h.sodiumTotal||0,target:x.sodium||5e3,unit:"mg",color:t("sodium")},{key:"potassium",label:"ã‚«ãƒªã‚¦ãƒ ",current:h.potassiumTotal||0,target:x.potassium,unit:"mg",color:t("potassium")}].filter(i=>i.target>0)},[h,x]),O=t=>{const i=d.filter((c,b)=>b!==t);T(i)};return e.jsx("div",{className:"recipe-screen-container",children:e.jsxs("div",{className:"recipe-screen-content",children:[e.jsxs("div",{className:"recipe-screen-header",children:[e.jsx("button",{onClick:m,className:"recipe-screen-back-button",children:r("recipe.back")}),e.jsx("h1",{className:"recipe-screen-title",children:r("recipe.title")})]}),e.jsx("button",{onClick:q,className:"recipe-screen-create-button",children:r("recipe.createNew")}),e.jsx("div",{className:"recipe-screen-list",children:j.length===0?e.jsxs("div",{className:"recipe-screen-empty",children:[e.jsx("p",{children:r("recipe.noRecipes")}),e.jsx("p",{style:{fontSize:"14px",color:"#78716c",marginTop:"0.5rem"},children:r("recipe.noRecipesDescription")})]}):j.map(t=>e.jsxs("div",{className:"recipe-screen-item",children:[e.jsxs("div",{className:"recipe-screen-item-header",children:[e.jsx("h3",{className:"recipe-screen-item-name",children:t.name}),e.jsxs("div",{className:"recipe-screen-item-actions",children:[e.jsx("button",{onClick:()=>$(t),className:"recipe-screen-item-button recipe-screen-item-use",children:r("recipe.use")}),e.jsx("button",{onClick:()=>U(t),className:"recipe-screen-item-button recipe-screen-item-edit",children:r("recipe.edit")}),e.jsx("button",{onClick:()=>Y(t.id),className:"recipe-screen-item-button recipe-screen-item-delete",children:r("recipe.delete")})]})]}),t.description&&e.jsx("p",{className:"recipe-screen-item-description",children:t.description}),e.jsxs("div",{className:"recipe-screen-item-foods",children:[e.jsx("p",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"0.5rem"},children:r("recipe.containsFoods")}),e.jsx("ul",{children:t.foods.map((i,c)=>e.jsxs("li",{style:{fontSize:"14px",marginBottom:"0.25rem"},children:[i.item," - ",i.amount,i.unit]},c))})]})]},t.id))}),(Q||w)&&e.jsx("div",{className:"recipe-screen-modal-overlay",onClick:()=>{f(!1),y(!1),g(!0)},children:e.jsxs("div",{className:"recipe-screen-modal",onClick:t=>t.stopPropagation(),children:[e.jsx("h2",{className:"recipe-screen-modal-title",children:r(w?"recipe.editTitle":"recipe.createTitle")}),E?e.jsxs("div",{className:"recipe-screen-modal-form",children:[e.jsxs("div",{style:{marginBottom:"1rem",padding:"0.75rem",backgroundColor:"#eff6ff",borderRadius:"8px",border:"1px solid #3b82f6"},children:[e.jsxs("p",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"0.5rem"},children:["ðŸ“ ææ–™ç™»éŒ²ãƒ¢ãƒ¼ãƒ‰ï¼ˆ",d.length,"å€‹ã®ææ–™ã‚’ç™»éŒ²æ¸ˆã¿ï¼‰"]}),e.jsx("p",{style:{fontSize:"12px",color:"#6b7280"},children:"ææ–™ã‚’è¿½åŠ ã—ãŸã‚‰ã€Œææ–™ç™»éŒ²ã‚’å®Œäº†ã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ã€ãƒ¬ã‚·ãƒ”æƒ…å ±ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚"})]}),o.error&&e.jsx("div",{className:"error-message",style:{color:"#dc2626",padding:"0.75rem",marginBottom:"1rem",backgroundColor:"#fef2f2",borderRadius:"8px"},children:o.error}),e.jsxs("div",{className:"custom-food-section",children:[e.jsxs("label",{children:[e.jsx("strong",{children:r("customFood.foodName")}),e.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginTop:"0.25rem",marginBottom:"0.5rem"},children:r("customFood.foodNameDescription")}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.5rem"},children:[e.jsx("input",{type:"text",value:o.foodName,onChange:t=>{const i=t.target.value;l(c=>({...c,foodName:i,displayName:i}))},placeholder:r("customFood.foodNamePlaceholder"),style:{flex:1,padding:"0.75rem",border:"1px solid #e5e7eb",borderRadius:"8px"}}),e.jsx("button",{onClick:J,disabled:o.isAnalyzing||!o.foodName.trim(),style:{padding:"0.75rem 1.5rem",backgroundColor:o.isAnalyzing?"#9ca3af":"#3b82f6",color:"white",border:"none",borderRadius:"8px",cursor:o.isAnalyzing?"not-allowed":"pointer",fontWeight:"600"},children:o.isAnalyzing?r("customFood.analyzing"):r("customFood.aiSuggest")})]})]}),e.jsxs("label",{style:{marginTop:"1rem",display:"block"},children:[e.jsx("strong",{children:r("customFood.displayName")}),e.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginTop:"0.25rem",marginBottom:"0.5rem"},children:r("customFood.displayNameDescription")}),e.jsx("input",{type:"text",value:o.displayName,onChange:t=>l(i=>({...i,displayName:t.target.value})),placeholder:o.foodName||r("customFood.displayNamePlaceholder"),style:{width:"100%",padding:"0.75rem",border:"1px solid #e5e7eb",borderRadius:"8px",marginTop:"0.5rem"}})]}),e.jsxs("label",{style:{marginTop:"1rem",display:"block"},children:[e.jsx("strong",{children:"æ•°é‡"}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.5rem",alignItems:"center"},children:[e.jsx("input",{type:"number",value:o.amount,onChange:t=>l(i=>({...i,amount:Number(t.target.value)})),min:"0",step:"10",style:{flex:1,padding:"0.75rem",border:"1px solid #e5e7eb",borderRadius:"8px"}}),e.jsxs("select",{value:o.unit,onChange:t=>l(i=>({...i,unit:t.target.value})),style:{padding:"0.75rem",border:"1px solid #e5e7eb",borderRadius:"8px"},children:[e.jsx("option",{value:"g",children:"g"}),e.jsx("option",{value:"å€‹",children:"å€‹"})]})]})]}),o.isAnalyzing&&o.loadingTip&&e.jsxs("div",{style:{marginTop:"1rem",padding:"1rem",backgroundColor:"#fef3c7",border:"1px solid #fbbf24",borderRadius:"8px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.5rem"},children:[e.jsxs("div",{style:{fontWeight:"600",color:"#92400e",flex:1},children:["ðŸ’¡ ",o.loadingTip.title]}),e.jsx("button",{onClick:()=>{o.isTipSavedState?oe(o.loadingTip.id):ie(o.loadingTip.id),l(t=>({...t,isTipSavedState:!t.isTipSavedState}))},style:{background:o.isTipSavedState?"#fef3c7":"none",border:o.isTipSavedState?"1px solid #f59e0b":"1px solid #d1d5db",borderRadius:"4px",fontSize:"16px",cursor:"pointer",color:o.isTipSavedState?"#f59e0b":"#6b7280",padding:"0.25rem 0.5rem",minWidth:"32px",height:"32px"},children:"â­"})]}),e.jsxs("div",{style:{fontSize:"12px",color:"#78350f",lineHeight:"1.5",marginBottom:"0.5rem"},children:[o.loadingTip.content.substring(0,150),"..."]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end"},children:[z.length>0&&e.jsx("button",{onClick:()=>{const t=z[z.length-1];C(i=>i.slice(0,-1)),l(i=>({...i,loadingTip:t,isTipSavedState:B(t.id)}))},style:{padding:"0.5rem 1rem",backgroundColor:"#f3f4f6",color:"#374151",border:"none",borderRadius:"4px",fontSize:"12px",fontWeight:"600",cursor:"pointer"},children:"æˆ»ã‚‹"}),e.jsx("button",{onClick:()=>{o.loadingTip&&C(i=>[...i,o.loadingTip]);const t=P(o.loadingTip.id);l(i=>({...i,loadingTip:t,isTipSavedState:B(t.id)}))},style:{padding:"0.5rem 1rem",backgroundColor:"#f59e0b",color:"white",border:"none",borderRadius:"4px",fontSize:"12px",fontWeight:"600",cursor:"pointer"},children:r("customFood.nextTip")})]}),e.jsx("div",{style:{clear:"both"}})]})]}),e.jsxs("div",{className:"custom-food-section",style:{backgroundColor:"#f9fafb",padding:"1rem",borderRadius:"8px",marginBottom:"1rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.75rem"},children:[e.jsx("span",{style:{backgroundColor:"#3b82f6",color:"white",borderRadius:"50%",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",fontWeight:"bold"},children:"2"}),e.jsx("strong",{style:{fontSize:"16px"},children:r("customFood.foodType")})]}),e.jsx("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.5rem",flexWrap:"wrap"},children:["animal","trash"].map(t=>e.jsx("button",{onClick:()=>l(i=>({...i,type:t})),style:{padding:"0.5rem 1rem",backgroundColor:o.type===t?"#3b82f6":"#f3f4f6",color:o.type===t?"white":"#374151",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px"},children:r(t==="animal"?"customFood.foodTypeAnimal":"customFood.foodTypeTrash")},t))})]}),e.jsxs("div",{className:"custom-food-section",style:{backgroundColor:"#f9fafb",padding:"1rem",borderRadius:"8px",marginBottom:"1rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.75rem"},children:[e.jsx("span",{style:{backgroundColor:"#3b82f6",color:"white",borderRadius:"50%",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",fontWeight:"bold"},children:"3"}),e.jsx("strong",{style:{fontSize:"16px"},children:r("customFood.nutrientsRequired")})]}),e.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"0.75rem"},children:r("customFood.nutrientsPer100g")}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem",maxHeight:"400px",overflowY:"auto",padding:"1rem",backgroundColor:"#f9fafb",borderRadius:"8px"},children:[e.jsxs("div",{children:[e.jsx(a,{label:r("customFood.protein"),currentDailyTotal:o.nutrients?.protein||0,previewAmount:0,target:100,color:"#64748b",unit:"g/100g",nutrientKey:"protein"}),e.jsx("input",{type:"number",value:o.nutrients?.protein||"",onChange:t=>s("protein",t.target.value?parseFloat(t.target.value):void 0),placeholder:"0",step:"0.1",style:{width:"100%",padding:"0.5rem",marginTop:"0.5rem",border:"1px solid #e5e7eb",borderRadius:"4px"}})]}),e.jsxs("div",{children:[e.jsx(a,{label:r("customFood.fat"),currentDailyTotal:o.nutrients?.fat||0,previewAmount:0,target:100,color:"#64748b",unit:"g/100g",nutrientKey:"fat"}),e.jsx("input",{type:"number",value:o.nutrients?.fat||"",onChange:t=>s("fat",t.target.value?parseFloat(t.target.value):void 0),placeholder:"0",step:"0.1",style:{width:"100%",padding:"0.5rem",marginTop:"0.5rem",border:"1px solid #e5e7eb",borderRadius:"4px"}})]}),e.jsxs("div",{children:[e.jsx(a,{label:r("customFood.carbs"),currentDailyTotal:o.nutrients?.carbs||0,previewAmount:0,target:100,color:"#64748b",unit:"g/100g"}),e.jsx("input",{type:"number",value:o.nutrients?.carbs||"",onChange:t=>s("carbs",t.target.value?parseFloat(t.target.value):void 0),placeholder:"0",step:"0.1",style:{width:"100%",padding:"0.5rem",marginTop:"0.5rem",border:"1px solid #e5e7eb",borderRadius:"4px"}})]})]})]}),e.jsxs("div",{className:"custom-food-section",style:{backgroundColor:"#f9fafb",padding:"1rem",borderRadius:"8px",marginBottom:"1rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.75rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("span",{style:{backgroundColor:"#3b82f6",color:"white",borderRadius:"50%",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",fontWeight:"bold"},children:"4"}),e.jsx("strong",{style:{fontSize:"16px"},children:r("customFood.nutrientsDetailed")})]}),e.jsx("button",{onClick:()=>l(t=>({...t,showAdvancedNutrients:!t.showAdvancedNutrients})),style:{padding:"0.5rem 1rem",backgroundColor:o.showAdvancedNutrients?"#3b82f6":"#f3f4f6",color:o.showAdvancedNutrients?"white":"#374151",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:o.showAdvancedNutrients?r("customFood.hideDetails"):r("customFood.showDetails")})]}),o.showAdvancedNutrients&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[e.jsxs("label",{children:[r("customFood.sodium")," (mg/100g)",e.jsx(a,{label:r("customFood.sodium"),currentDailyTotal:o.nutrients?.sodium||0,previewAmount:0,target:5e3,color:"#64748b",unit:"mg/100g",nutrientKey:"sodium"}),e.jsx("input",{type:"number",value:o.nutrients?.sodium||"",onChange:t=>s("sodium",t.target.value?parseFloat(t.target.value):void 0),placeholder:"0",step:"0.1",style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",border:"1px solid #e5e7eb",borderRadius:"4px"}})]}),e.jsxs("label",{children:[r("customFood.magnesium")," (mg/100g)",e.jsx(a,{label:r("customFood.magnesium"),currentDailyTotal:o.nutrients?.magnesium||0,previewAmount:0,target:600,color:"#64748b",unit:"mg/100g",nutrientKey:"magnesium"}),e.jsx("input",{type:"number",value:o.nutrients?.magnesium||"",onChange:t=>s("magnesium",t.target.value?parseFloat(t.target.value):void 0),placeholder:"0",step:"0.1",style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",border:"1px solid #e5e7eb",borderRadius:"4px"}})]}),e.jsxs("label",{children:[r("customFood.potassium")," (mg/100g)",e.jsx(a,{label:r("customFood.potassium"),currentDailyTotal:o.nutrients?.potassium||0,previewAmount:0,target:4500,color:"#64748b",unit:"mg/100g",nutrientKey:"potassium"}),e.jsx("input",{type:"number",value:o.nutrients?.potassium||"",onChange:t=>s("potassium",t.target.value?parseFloat(t.target.value):void 0),placeholder:"0",step:"0.1",style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",border:"1px solid #e5e7eb",borderRadius:"4px"}})]}),e.jsxs("label",{children:[r("customFood.zinc")," (mg/100g)",e.jsx(a,{label:r("customFood.zinc"),currentDailyTotal:o.nutrients?.zinc||0,previewAmount:0,target:11,color:"#64748b",unit:"mg/100g",nutrientKey:"zinc"}),e.jsx("input",{type:"number",value:o.nutrients?.zinc||"",onChange:t=>s("zinc",t.target.value?parseFloat(t.target.value):void 0),placeholder:"0",step:"0.01",style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",border:"1px solid #e5e7eb",borderRadius:"4px"}})]}),e.jsxs("label",{children:[r("customFood.iron")," (mg/100g)",e.jsx(a,{label:r("customFood.iron"),currentDailyTotal:(o.nutrients?.hemeIron||0)+(o.nutrients?.nonHemeIron||0),previewAmount:0,target:8,color:"#64748b",unit:"mg/100g",nutrientKey:"iron"}),e.jsx("input",{type:"number",value:(o.nutrients?.hemeIron||0)+(o.nutrients?.nonHemeIron||0)||"",onChange:t=>{const i=t.target.value?parseFloat(t.target.value):0;s("hemeIron",i),s("nonHemeIron",0)},placeholder:"0",step:"0.01",style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",border:"1px solid #e5e7eb",borderRadius:"4px"}})]}),e.jsxs("label",{children:[r("customFood.vitaminA")," (IU/100g)",e.jsx(a,{label:r("customFood.vitaminA"),currentDailyTotal:o.nutrients?.vitaminA||0,previewAmount:0,target:5e3,color:"#64748b",unit:"IU/100g",nutrientKey:"vitamin_a"}),e.jsx("input",{type:"number",value:o.nutrients?.vitaminA||"",onChange:t=>s("vitaminA",t.target.value?parseFloat(t.target.value):void 0),placeholder:"0",step:"1",style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",border:"1px solid #e5e7eb",borderRadius:"4px"}})]}),e.jsxs("label",{children:[r("customFood.vitaminD")," (IU/100g)",e.jsx(a,{label:r("customFood.vitaminD"),currentDailyTotal:o.nutrients?.vitaminD||0,previewAmount:0,target:2e3,color:"#64748b",unit:"IU/100g",nutrientKey:"vitamin_d"}),e.jsx("input",{type:"number",value:o.nutrients?.vitaminD||"",onChange:t=>s("vitaminD",t.target.value?parseFloat(t.target.value):void 0),placeholder:"0",step:"0.1",style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",border:"1px solid #e5e7eb",borderRadius:"4px"}})]}),e.jsxs("label",{children:[r("customFood.vitaminK2")," (Î¼g/100g)",e.jsx(a,{label:r("customFood.vitaminK2"),currentDailyTotal:o.nutrients?.vitaminK2||0,previewAmount:0,target:200,color:"#64748b",unit:"Î¼g/100g",nutrientKey:"vitamin_k2"}),e.jsx("input",{type:"number",value:o.nutrients?.vitaminK2||"",onChange:t=>s("vitaminK2",t.target.value?parseFloat(t.target.value):void 0),placeholder:"0",step:"0.1",style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",border:"1px solid #e5e7eb",borderRadius:"4px"}})]}),e.jsxs("label",{children:[r("customFood.vitaminB12")," (Î¼g/100g)",e.jsx(a,{label:r("customFood.vitaminB12"),currentDailyTotal:o.nutrients?.vitaminB12||0,previewAmount:0,target:2.4,color:"#64748b",unit:"Î¼g/100g",nutrientKey:"vitamin_b12"}),e.jsx("input",{type:"number",value:o.nutrients?.vitaminB12||"",onChange:t=>s("vitaminB12",t.target.value?parseFloat(t.target.value):void 0),placeholder:"0",step:"0.01",style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",border:"1px solid #e5e7eb",borderRadius:"4px"}})]}),e.jsxs("label",{children:[r("customFood.omega3")," (g/100g)",e.jsx(a,{label:r("customFood.omega3"),currentDailyTotal:o.nutrients?.omega3||0,previewAmount:0,target:2,color:"#64748b",unit:"g/100g",nutrientKey:"omega3"}),e.jsx("input",{type:"number",value:o.nutrients?.omega3||"",onChange:t=>s("omega3",t.target.value?parseFloat(t.target.value):void 0),placeholder:"0",step:"0.01",style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",border:"1px solid #e5e7eb",borderRadius:"4px"}})]}),e.jsxs("label",{children:[r("customFood.omega6")," (g/100g)",e.jsx(a,{label:r("customFood.omega6"),currentDailyTotal:o.nutrients?.omega6||0,previewAmount:0,target:5,color:"#64748b",unit:"g/100g",nutrientKey:"omega6"}),e.jsx("input",{type:"number",value:o.nutrients?.omega6||"",onChange:t=>s("omega6",t.target.value?parseFloat(t.target.value):void 0),placeholder:"0",step:"0.01",style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",border:"1px solid #e5e7eb",borderRadius:"4px"}})]}),e.jsxs("label",{children:[r("customFood.calcium")," (mg/100g)",e.jsx(a,{label:r("customFood.calcium"),currentDailyTotal:o.nutrients?.calcium||0,previewAmount:0,target:1e3,color:"#64748b",unit:"mg/100g",nutrientKey:"calcium"}),e.jsx("input",{type:"number",value:o.nutrients?.calcium||"",onChange:t=>s("calcium",t.target.value?parseFloat(t.target.value):void 0),placeholder:"0",step:"0.1",style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",border:"1px solid #e5e7eb",borderRadius:"4px"}})]}),e.jsxs("label",{children:[r("customFood.phosphorus")," (mg/100g)",e.jsx(a,{label:r("customFood.phosphorus"),currentDailyTotal:o.nutrients?.phosphorus||0,previewAmount:0,target:700,color:"#64748b",unit:"mg/100g",nutrientKey:"phosphorus"}),e.jsx("input",{type:"number",value:o.nutrients?.phosphorus||"",onChange:t=>s("phosphorus",t.target.value?parseFloat(t.target.value):void 0),placeholder:"0",step:"0.1",style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",border:"1px solid #e5e7eb",borderRadius:"4px"}})]}),e.jsxs("label",{children:[r("customFood.glycine")," (g/100g)",e.jsx(a,{label:r("customFood.glycine"),currentDailyTotal:o.nutrients?.glycine||0,previewAmount:0,target:10,color:"#64748b",unit:"g/100g",nutrientKey:"glycine"}),e.jsx("input",{type:"number",value:o.nutrients?.glycine||"",onChange:t=>s("glycine",t.target.value?parseFloat(t.target.value):void 0),placeholder:"0",step:"0.01",style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",border:"1px solid #e5e7eb",borderRadius:"4px"}})]}),e.jsxs("label",{children:[r("customFood.methionine")," (g/100g)",e.jsx(a,{label:r("customFood.methionine"),currentDailyTotal:o.nutrients?.methionine||0,previewAmount:0,target:2,color:"#64748b",unit:"g/100g",nutrientKey:"methionine"}),e.jsx("input",{type:"number",value:o.nutrients?.methionine||"",onChange:t=>s("methionine",t.target.value?parseFloat(t.target.value):void 0),placeholder:"0",step:"0.01",style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",border:"1px solid #e5e7eb",borderRadius:"4px"}})]}),e.jsxs("label",{children:[r("customFood.taurine")," (mg/100g)",e.jsx(a,{label:r("customFood.taurine"),currentDailyTotal:o.nutrients?.taurine||0,previewAmount:0,target:500,color:"#64748b",unit:"mg/100g",nutrientKey:"taurine"}),e.jsx("input",{type:"number",value:o.nutrients?.taurine||"",onChange:t=>s("taurine",t.target.value?parseFloat(t.target.value):void 0),placeholder:"0",step:"0.1",style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",border:"1px solid #e5e7eb",borderRadius:"4px"}})]})]})]}),e.jsxs("div",{className:"custom-food-section",style:{backgroundColor:"#f9fafb",padding:"1rem",borderRadius:"8px",marginBottom:"1rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.75rem"},children:[e.jsx("span",{style:{backgroundColor:"#3b82f6",color:"white",borderRadius:"50%",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",fontWeight:"bold"},children:"5"}),e.jsx("strong",{style:{fontSize:"16px"},children:r("customFood.antiNutrients")})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"0.5rem"},children:[e.jsxs("label",{children:[r("customFood.phytates")," (mg/100g)",e.jsx(a,{label:r("customFood.phytates"),currentDailyTotal:o.nutrients?.phytates||0,previewAmount:0,target:0,color:"#ef4444",unit:"mg/100g",nutrientKey:"phytates"}),e.jsx("input",{type:"number",value:o.nutrients?.phytates||"",onChange:t=>s("phytates",t.target.value?parseFloat(t.target.value):void 0),placeholder:"0",step:"0.1",style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",border:"1px solid #e5e7eb",borderRadius:"4px"}})]}),e.jsxs("label",{children:[r("customFood.oxalates")," (mg/100g)",e.jsx(a,{label:r("customFood.oxalates"),currentDailyTotal:o.nutrients?.oxalates||0,previewAmount:0,target:0,color:"#ef4444",unit:"mg/100g",nutrientKey:"oxalates"}),e.jsx("input",{type:"number",value:o.nutrients?.oxalates||"",onChange:t=>s("oxalates",t.target.value?parseFloat(t.target.value):void 0),placeholder:"0",step:"0.1",style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",border:"1px solid #e5e7eb",borderRadius:"4px"}})]}),e.jsxs("label",{children:[r("customFood.lectins")," (mg/100g)",e.jsx(a,{label:r("customFood.lectins"),currentDailyTotal:o.nutrients?.lectins||0,previewAmount:0,target:0,color:"#ef4444",unit:"mg/100g",nutrientKey:"lectins"}),e.jsx("input",{type:"number",value:o.nutrients?.lectins||"",onChange:t=>s("lectins",t.target.value?parseFloat(t.target.value):void 0),placeholder:"0",step:"0.1",style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",border:"1px solid #e5e7eb",borderRadius:"4px"}})]})]})]}),e.jsxs("div",{className:"custom-food-section",style:{backgroundColor:"#f9fafb",padding:"1rem",borderRadius:"8px",marginBottom:"1rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.75rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("span",{style:{backgroundColor:"#3b82f6",color:"white",borderRadius:"50%",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",fontWeight:"bold"},children:"6"}),e.jsx("strong",{style:{fontSize:"16px"},children:"æŠ—æ „é¤Šç´ ï¼ˆè©³ç´°ï¼‰"})]}),e.jsx("button",{onClick:()=>H(!v),style:{padding:"0.5rem 1rem",backgroundColor:v?"#3b82f6":"#f3f4f6",color:v?"white":"#374151",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:v?"è©³ç´°ã‚’éžè¡¨ç¤º":"è©³ç´°ã‚’è¡¨ç¤º"})]}),v&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[e.jsxs("label",{children:[r("customFood.polyphenols")," (mg/100g)",e.jsx("input",{type:"number",value:o.nutrients?.polyphenols||"",onChange:t=>s("polyphenols",t.target.value?parseFloat(t.target.value):void 0),placeholder:"0",step:"0.1",style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",border:"1px solid #e5e7eb",borderRadius:"4px"}})]}),e.jsxs("label",{children:[r("customFood.flavonoids")," (mg/100g)",e.jsx("input",{type:"number",value:o.nutrients?.flavonoids||"",onChange:t=>s("flavonoids",t.target.value?parseFloat(t.target.value):void 0),placeholder:"0",step:"0.1",style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",border:"1px solid #e5e7eb",borderRadius:"4px"}})]}),e.jsxs("label",{children:[r("customFood.saponins")," (mg/100g)",e.jsx("input",{type:"number",value:o.nutrients?.saponins||"",onChange:t=>s("saponins",t.target.value?parseFloat(t.target.value):void 0),placeholder:"0",step:"0.1",style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",border:"1px solid #e5e7eb",borderRadius:"4px"}})]}),e.jsxs("label",{children:[r("customFood.goitrogens")," (mg/100g)",e.jsx("input",{type:"number",value:o.nutrients?.goitrogens||"",onChange:t=>s("goitrogens",t.target.value?parseFloat(t.target.value):void 0),placeholder:"0",step:"0.1",style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",border:"1px solid #e5e7eb",borderRadius:"4px"}})]}),e.jsxs("label",{children:[r("customFood.tannins")," (mg/100g)",e.jsx("input",{type:"number",value:o.nutrients?.tannins||"",onChange:t=>s("tannins",t.target.value?parseFloat(t.target.value):void 0),placeholder:"0",step:"0.1",style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",border:"1px solid #e5e7eb",borderRadius:"4px"}})]})]})]}),d.length>0&&e.jsxs("div",{style:{marginBottom:"1rem",padding:"1rem",backgroundColor:"#f9fafb",borderRadius:"8px"},children:[e.jsxs("p",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"0.5rem"},children:["ç™»éŒ²æ¸ˆã¿ææ–™ (",d.length,"å€‹)"]}),e.jsx("ul",{style:{listStyle:"none",padding:0,margin:0},children:d.map((t,i)=>e.jsxs("li",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.5rem",marginBottom:"0.25rem",backgroundColor:"white",borderRadius:"4px"},children:[e.jsxs("span",{style:{fontSize:"14px"},children:[t.item," - ",t.amount,t.unit]}),e.jsx("button",{onClick:()=>O(i),style:{padding:"0.25rem 0.5rem",backgroundColor:"#dc2626",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Ã—"})]},i))})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"2rem",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:()=>{f(!1),y(!1),g(!0)},style:{padding:"0.75rem 1.5rem",backgroundColor:"#f3f4f6",color:"#374151",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"600"},children:r("common.cancel")}),e.jsx("button",{onClick:G,disabled:!o.foodName.trim(),style:{padding:"0.75rem 1.5rem",backgroundColor:o.foodName.trim()?"#3b82f6":"#9ca3af",color:"white",border:"none",borderRadius:"8px",cursor:o.foodName.trim()?"pointer":"not-allowed",fontWeight:"600"},children:"ææ–™ã‚’è¿½åŠ "}),e.jsx("button",{onClick:L,disabled:d.length===0,style:{padding:"0.75rem 1.5rem",backgroundColor:d.length===0?"#9ca3af":"#10b981",color:"white",border:"none",borderRadius:"8px",cursor:d.length===0?"not-allowed":"pointer",fontWeight:"600"},children:"ææ–™ç™»éŒ²ã‚’å®Œäº†"})]})]}):e.jsxs("div",{className:"recipe-screen-modal-form",children:[e.jsxs("div",{style:{marginBottom:"1rem",padding:"0.75rem",backgroundColor:"#f0fdf4",borderRadius:"8px",border:"1px solid #10b981"},children:[e.jsxs("p",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"0.5rem"},children:["âœ… ãƒ¬ã‚·ãƒ”ç™»éŒ²ãƒ¢ãƒ¼ãƒ‰ï¼ˆ",d.length,"å€‹ã®ææ–™ã‚’ç™»éŒ²æ¸ˆã¿ï¼‰"]}),e.jsx("p",{style:{fontSize:"12px",color:"#6b7280"},children:"ãƒ¬ã‚·ãƒ”åã¨èª¬æ˜Žã‚’å…¥åŠ›ã—ã¦ã€ãƒ¬ã‚·ãƒ”ã‚’ä¿å­˜ã—ã¦ãã ã•ã„ã€‚"})]}),e.jsxs("label",{className:"recipe-screen-modal-label",children:[r("recipe.name")," *",e.jsx("input",{type:"text",value:F,onChange:t=>R(t.target.value),className:"recipe-screen-modal-input",placeholder:r("recipe.namePlaceholder")})]}),e.jsxs("label",{className:"recipe-screen-modal-label",children:[r("recipe.description"),e.jsx("textarea",{value:A,onChange:t=>k(t.target.value),className:"recipe-screen-modal-textarea",placeholder:r("recipe.descriptionPlaceholder"),rows:3})]}),e.jsxs("div",{style:{marginBottom:"1rem",padding:"1rem",backgroundColor:"#f9fafb",borderRadius:"8px"},children:[e.jsxs("p",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"0.5rem"},children:[r("recipe.containsFoods")," (",d.length,"å€‹)"]}),e.jsx("ul",{style:{listStyle:"none",padding:0,margin:0},children:d.map((t,i)=>e.jsxs("li",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.5rem",marginBottom:"0.25rem",backgroundColor:"white",borderRadius:"4px"},children:[e.jsxs("span",{style:{fontSize:"14px"},children:[t.item," - ",t.amount,t.unit]}),e.jsx("button",{onClick:()=>O(i),style:{padding:"0.25rem 0.5rem",backgroundColor:"#dc2626",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Ã—"})]},i))})]}),M.length>0&&e.jsxs("div",{style:{marginBottom:"16px",padding:"12px",backgroundColor:"#f9fafb",borderRadius:"8px"},children:[e.jsx("p",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"8px"},children:"æ „é¤Šç´ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:M.map(t=>e.jsx(a,{label:t.label,currentDailyTotal:t.current,previewAmount:0,target:t.target,color:t.color,unit:t.unit,nutrientKey:t.key},t.key))})]}),e.jsxs("div",{className:"recipe-screen-modal-actions",children:[e.jsx("button",{onClick:()=>g(!0),className:"recipe-screen-modal-cancel",children:"ææ–™ã«æˆ»ã‚‹"}),e.jsx("button",{onClick:()=>{f(!1),y(!1),g(!0)},className:"recipe-screen-modal-cancel",children:r("recipe.cancel")}),e.jsx("button",{onClick:V,className:"recipe-screen-modal-save",children:r("recipe.save")})]})]})]})})]})})}export{ge as default};
