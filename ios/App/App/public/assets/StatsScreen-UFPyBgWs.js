import{j as e,a as z,b as $,d as B}from"./index-CvGLKNdl.js";import{r as x,R as v,L as w,C as D,X as M,Y as C,T,a as L,b as S}from"./chart-vendor-BKK2UjWf.js";import{A as _}from"./AnimalCounter-mani3_wF.js";import"./react-vendor-OvXVS5lI.js";import"./ai-vendor-9LcfXvm6.js";function A({logs:t,nutrientKey:m,nutrientLabel:u,unit:h,targetValue:p,period:s="daily"}){const l=x.useMemo(()=>{if(t.length===0)return[];const o=[...t].sort((r,i)=>r.date.localeCompare(i.date));if(s==="daily")return o.slice(-30).map(i=>{const a=i.calculatedMetrics[m]||0;return{date:i.date.split("T")[0].split("-").slice(1).join("/"),value:Math.round(a*10)/10,target:p}});if(s==="weekly"){const r={};return o.forEach(i=>{const a=new Date(i.date),c=new Date(a);c.setDate(a.getDate()-a.getDay());const g=c.toISOString().split("T")[0];r[g]||(r[g]={total:0,count:0});const n=i.calculatedMetrics[m]||0;r[g].total+=n,r[g].count+=1}),Object.entries(r).sort(([i],[a])=>i.localeCompare(a)).slice(-12).map(([i,a])=>{const c=new Date(i);return{date:`${c.getMonth()+1}/${c.getDate()}`,value:Math.round(a.total/a.count*10)/10,target:p}})}else{const r={};return o.forEach(i=>{const a=new Date(i.date),c=`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}`;r[c]||(r[c]={total:0,count:0});const g=i.calculatedMetrics[m]||0;r[c].total+=g,r[c].count+=1}),Object.entries(r).sort(([i],[a])=>i.localeCompare(a)).slice(-12).map(([i,a])=>{const[c,g]=i.split("-");return{date:`${c}/${g}`,value:Math.round(a.total/a.count*10)/10,target:p}})}},[t,m,p,s]);return l.length===0?e.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#78716c"},children:"„Éá„Éº„Çø„Åå„ÅÇ„Çä„Åæ„Åõ„Çì"}):e.jsx("div",{style:{width:"100%",height:"300px",marginTop:"1rem"},children:e.jsx(v,{width:"100%",height:"100%",children:e.jsxs(w,{data:l,margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(D,{strokeDasharray:"3 3",stroke:"#27272a"}),e.jsx(M,{dataKey:"date",stroke:"#71717a",tick:{fill:"#a1a1aa"},style:{fontSize:"12px"}}),e.jsx(C,{stroke:"#71717a",tick:{fill:"#a1a1aa"},style:{fontSize:"12px"},label:{value:`${u} (${h})`,angle:-90,position:"insideLeft",style:{fontSize:"12px",fill:"#a1a1aa"}}}),e.jsx(T,{formatter:o=>o!==void 0?[`${o}${h}`,u]:["",""],labelFormatter:o=>`Êó•‰ªò: ${o}`,contentStyle:{backgroundColor:"#18181b",border:"1px solid #27272a",borderRadius:"8px",color:"#e4e4e7"},itemStyle:{color:"#f43f5e"},labelStyle:{color:"#a1a1aa"}}),e.jsx(L,{wrapperStyle:{color:"#a1a1aa"}}),e.jsx(S,{type:"monotone",dataKey:"value",stroke:"#f43f5e",strokeWidth:3,name:u,dot:{r:4,fill:"#09090b",stroke:"#f43f5e",strokeWidth:2},activeDot:{r:6,fill:"#f43f5e",stroke:"#fff"}}),p&&e.jsx(S,{type:"monotone",dataKey:"target",stroke:"#bef264",strokeWidth:2,strokeDasharray:"5 5",name:"ÁõÆÊ®ôÂÄ§",dot:!1})]})})})}function W({logs:t,period:m="daily"}){const u=x.useMemo(()=>{if(t.length===0)return[];const h=t.filter(s=>s.weight!==void 0&&s.weight!==null);if(h.length===0)return[];const p=[...h].sort((s,l)=>s.date.localeCompare(l.date));if(m==="daily")return p.slice(-30).map(l=>({date:l.date.split("T")[0].split("-").slice(1).join("/"),weight:Math.round((l.weight||0)*10)/10}));if(m==="weekly"){const s={};return p.forEach(l=>{const o=new Date(l.date),r=new Date(o);r.setDate(o.getDate()-o.getDay());const i=r.toISOString().split("T")[0];s[i]||(s[i]={total:0,count:0}),s[i].total+=l.weight||0,s[i].count+=1}),Object.entries(s).sort(([l],[o])=>l.localeCompare(o)).slice(-12).map(([l,o])=>{const r=new Date(l);return{date:`${r.getMonth()+1}/${r.getDate()}`,weight:Math.round(o.total/o.count*10)/10}})}else{const s={};return p.forEach(l=>{const o=new Date(l.date),r=`${o.getFullYear()}-${String(o.getMonth()+1).padStart(2,"0")}`;s[r]||(s[r]={total:0,count:0}),s[r].total+=l.weight||0,s[r].count+=1}),Object.entries(s).sort(([l],[o])=>l.localeCompare(o)).slice(-12).map(([l,o])=>{const[r,i]=l.split("-");return{date:`${r}/${i}`,weight:Math.round(o.total/o.count*10)/10}})}},[t,m]);return u.length===0?e.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#78716c"},children:"‰ΩìÈáç„Éá„Éº„Çø„Åå„ÅÇ„Çä„Åæ„Åõ„Çì"}):e.jsx("div",{style:{width:"100%",height:"300px",marginTop:"1rem"},children:e.jsx(v,{width:"100%",height:"100%",children:e.jsxs(w,{data:u,margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(D,{strokeDasharray:"3 3",stroke:"#27272a"}),e.jsx(M,{dataKey:"date",stroke:"#71717a",tick:{fill:"#a1a1aa"},style:{fontSize:"12px"}}),e.jsx(C,{stroke:"#71717a",tick:{fill:"#a1a1aa"},style:{fontSize:"12px"},label:{value:"‰ΩìÈáç (kg)",angle:-90,position:"insideLeft",style:{fontSize:"12px",fill:"#a1a1aa"}}}),e.jsx(T,{formatter:h=>h!==void 0?[`${h}kg`,"‰ΩìÈáç"]:["",""],labelFormatter:h=>`Êó•‰ªò: ${h}`,contentStyle:{backgroundColor:"#18181b",border:"1px solid #27272a",borderRadius:"8px",color:"#e4e4e7"},itemStyle:{color:"#06b6d4"},labelStyle:{color:"#a1a1aa"}}),e.jsx(L,{wrapperStyle:{color:"#a1a1aa"}}),e.jsx(S,{type:"monotone",dataKey:"weight",stroke:"#06b6d4",strokeWidth:3,name:"‰ΩìÈáç",dot:{r:4,fill:"#09090b",stroke:"#06b6d4",strokeWidth:2},activeDot:{r:6,fill:"#06b6d4",stroke:"#fff"}})]})})})}function I({logs:t}){const m=()=>{if(t.length===0)return 0;const a=[...t].sort((n,y)=>y.date.localeCompare(n.date));let c=0;const g=new Date;for(let n=0;n<a.length;n++){const y=new Date(a[n].date),f=new Date(g);if(f.setDate(g.getDate()-n),y.toDateString()===f.toDateString())c++;else break}return c},u=t.filter(a=>!a.calculatedMetrics?.hasViolation).length,h=(()=>{const a=[...t].sort((g,n)=>n.date.localeCompare(g.date));let c=0;for(const g of a)if(!g.calculatedMetrics?.hasViolation)c++;else break;return c})(),p=m(),s=[{id:"first_log",title:"ü•© Âàù„ÇÅ„Å¶„ÅÆË®òÈå≤",description:"ÊúÄÂàù„ÅÆÈ£ü‰∫ã„ÇíË®òÈå≤„Åó„Åæ„Åó„Åü",icon:"üéâ",unlocked:t.length>=1,progress:Math.min(t.length,1),target:1,category:"app_usage"},{id:"logs_50",title:"üìä 50Êó•ÂàÜ„ÅÆË®òÈå≤",description:"50Êó•ÂàÜ„ÅÆÈ£ü‰∫ã„ÇíË®òÈå≤„Åó„Åæ„Åó„Åü",icon:"üìä",unlocked:t.length>=50,progress:Math.min(t.length,50),target:50,category:"app_usage"},{id:"logs_100",title:"üíØ 100Êó•ÂàÜ„ÅÆË®òÈå≤",description:"100Êó•ÂàÜ„ÅÆÈ£ü‰∫ã„ÇíË®òÈå≤„Åó„Åæ„Åó„Åü",icon:"üíØ",unlocked:t.length>=100,progress:Math.min(t.length,100),target:100,category:"app_usage"}],l=[{id:"streak_7",title:"üî• 7Êó•ÈÄ£Á∂ö",description:"7Êó•ÈñìÈÄ£Á∂ö„ÅßË®òÈå≤„ÇíÁ∂ö„Åë„Åæ„Åó„Åü",icon:"üî•",unlocked:p>=7,progress:Math.min(p,7),target:7,category:"carnivore_practice"},{id:"streak_30",title:"üí™ 30Êó•ÈÄ£Á∂ö",description:"30Êó•ÈñìÈÄ£Á∂ö„ÅßË®òÈå≤„ÇíÁ∂ö„Åë„Åæ„Åó„Åü",icon:"üí™",unlocked:p>=30,progress:Math.min(p,30),target:30,category:"carnivore_practice"},{id:"streak_100",title:"üëë 100Êó•ÈÄ£Á∂ö",description:"100Êó•ÈñìÈÄ£Á∂ö„ÅßË®òÈå≤„ÇíÁ∂ö„Åë„Åæ„Åó„Åü",icon:"üëë",unlocked:p>=100,progress:Math.min(p,100),target:100,category:"carnivore_practice"},{id:"perfect_day",title:"üéØ ÂÆåÁíß„Å™1Êó•",description:"ÈÅïÂèç„Å™„Åó„ÅÆÊó•„ÇíÈÅîÊàê„Åó„Åæ„Åó„Åü",icon:"üéØ",unlocked:u>=1,progress:Math.min(u,1),target:1,category:"carnivore_practice"},{id:"perfect_week",title:"üìà 1ÈÄ±ÈñìÂÆåÁíß",description:"7Êó•ÈÄ£Á∂ö„ÅßÈÅïÂèç„Å™„Åó„ÇíÈÅîÊàê„Åó„Åæ„Åó„Åü",icon:"üìà",unlocked:h>=7,progress:Math.min(h,7),target:7,category:"carnivore_practice"}],o=[...s,...l],r=o.filter(a=>a.unlocked).length,i=(a,c)=>{const g=c.filter(n=>n.unlocked).length;return e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem",paddingBottom:"0.5rem",borderBottom:"1px solid #3f3f46"},children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:"bold",color:"#e4e4e7"},children:a}),e.jsxs("div",{style:{fontSize:"12px",color:"#a1a1aa"},children:[g," / ",c.length]})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"1rem"},children:c.map(n=>e.jsxs("div",{style:{padding:"1rem",backgroundColor:n.unlocked?"#27272a":"#1c1c1e",borderRadius:"8px",border:n.unlocked?"1px solid #f59e0b":"1px solid #3f3f46",opacity:n.unlocked?1:.6,transition:"all 0.2s"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem"},children:[e.jsx("div",{style:{fontSize:"24px"},children:n.icon}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:"14px",fontWeight:"bold",color:n.unlocked?"#e4e4e7":"#71717a"},children:n.title}),e.jsx("div",{style:{fontSize:"12px",color:"#a1a1aa",marginTop:"0.25rem"},children:n.description})]})]}),!n.unlocked&&e.jsxs("div",{style:{marginTop:"0.75rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"11px",color:"#71717a",marginBottom:"0.25rem"},children:[e.jsx("span",{children:"ÈÄ≤Êçó"}),e.jsxs("span",{children:[n.progress.toFixed(0)," / ",n.target]})]}),e.jsx("div",{style:{width:"100%",height:"4px",backgroundColor:"#3f3f46",borderRadius:"2px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${n.progress/n.target*100}%`,height:"100%",backgroundColor:"#f59e0b",transition:"width 0.3s"}})})]}),n.unlocked&&e.jsx("div",{style:{marginTop:"0.5rem",fontSize:"11px",color:"#34d399",fontWeight:"600"},children:"‚úÖ Ëß£Èô§Ê∏à„Åø"})]},n.id))})]})};return e.jsxs("div",{style:{marginTop:"2rem",padding:"1.5rem",backgroundColor:"#18181b",borderRadius:"12px",border:"1px solid #27272a"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx("h2",{style:{fontSize:"18px",fontWeight:"bold",color:"#f59e0b",textShadow:"0 0 5px rgba(245, 158, 11, 0.4)"},children:"üèÜ ÂÆüÁ∏æ"}),e.jsxs("div",{style:{fontSize:"14px",color:"#a1a1aa"},children:[r," / ",o.length," Ëß£Èô§"]})]}),i("üì± „Ç¢„Éó„É™Âà©Áî®ËÄÖ„Å®„Åó„Å¶„ÅÆÂÆüÁ∏æ",s),i("ü•© CarnivoreÂÆüË∑µËÄÖ„Å®„Åó„Å¶„ÅÆÂÆüÁ∏æ",l)]})}function O(){const{userProfile:t}=z(),[m,u]=x.useState([]),[h,p]=x.useState("proteinTotal"),[s,l]=x.useState("daily"),[o,r]=x.useState("nutrients");x.useEffect(()=>{i()},[]);const i=async()=>{const k=(await $()).sort((b,j)=>b.date.localeCompare(j.date));u(k)},a=x.useMemo(()=>t?B(t.gender,t.age,t.activityLevel,t.isPregnant,t.isBreastfeeding,t.isPostMenopause,t.stressLevel,t.sleepHours,t.exerciseIntensity,t.exerciseFrequency,t.thyroidFunction,t.sunExposureFrequency,t.digestiveIssues,t.inflammationLevel,t.mentalHealthStatus,t.supplementMagnesium,t.supplementVitaminD,t.supplementIodine,t.alcoholFrequency,t.caffeineIntake):null,[t]),c=[{key:"proteinTotal",label:"„Çø„É≥„Éë„ÇØË≥™",unit:"g",target:a?.protein},{key:"fatTotal",label:"ËÑÇË≥™",unit:"g",target:a?.fat},{key:"sodiumTotal",label:"„Éä„Éà„É™„Ç¶„É†",unit:"mg",target:a?.sodium},{key:"magnesiumTotal",label:"„Éû„Ç∞„Éç„Ç∑„Ç¶„É†",unit:"mg",target:a?.magnesium},{key:"effectiveIron",label:"ÈâÑÂàÜ",unit:"mg",target:a?.iron},{key:"effectiveZinc",label:"‰∫úÈâõ",unit:"mg",target:a?.zinc},{key:"effectiveVitC",label:"„Éì„Çø„Éü„É≥C",unit:"mg",target:void 0},{key:"effectiveVitK",label:"„Éì„Çø„Éü„É≥K",unit:"Œºg",target:void 0}],g=x.useMemo(()=>Array.from({length:7}).map((d,k)=>{const b=new Date;b.setDate(b.getDate()-(6-k));const j=b.toISOString().split("T")[0];return{id:`dummy-${k}`,date:j,foods:["Beef","Salt"],calculatedMetrics:{proteinTotal:140+Math.sin(k)*20,fatTotal:130+Math.cos(k)*15,carbsTotal:Math.random()*3,sodiumTotal:4e3+Math.random()*500,magnesiumTotal:400+Math.random()*50,potassiumTotal:3e3+Math.random()*300,effectiveIron:15+Math.random()*5,effectiveZinc:20+Math.random()*5,effectiveVitC:15+Math.random()*5,effectiveVitK:50+Math.random()*20},weight:t?.weight?t.weight-k*.2:70-k*.2}}),[t]),n=m.length===0,y=n?g:m,f=c.find(d=>d.key===h);return e.jsx("div",{className:"stats-screen-container",children:e.jsxs("div",{className:"stats-screen-content",children:[e.jsx("h1",{className:"stats-screen-title",children:"Áµ±Ë®à„Éª„Ç∞„É©„Éï"}),e.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1.5rem",borderBottom:"2px solid #27272a"},children:["nutrients","weight"].map(d=>e.jsx("button",{onClick:()=>r(d),style:{padding:"0.75rem 1.5rem",backgroundColor:o===d?"#b91c1c":"transparent",color:o===d?"white":"#a1a1aa",border:"none",borderBottom:o===d?"2px solid #b91c1c":"2px solid transparent",cursor:"pointer",fontWeight:o===d?"bold":"600",transition:"all 0.2s",fontSize:"14px"},children:d==="nutrients"?"Ê†ÑÈ§äÁ¥†":"‰ΩìÈáç"},d))}),o==="nutrients"&&e.jsxs("div",{className:"stats-screen-nutrients-section",children:[e.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem"},children:["daily","weekly","monthly"].map(d=>e.jsx("button",{onClick:()=>l(d),style:{padding:"0.5rem 1rem",backgroundColor:s===d?"#dc2626":"#27272a",color:s===d?"white":"#a1a1aa",border:"1px solid",borderColor:s===d?"#dc2626":"#3f3f46",borderRadius:"8px",cursor:"pointer",fontWeight:"500",fontSize:"14px",transition:"all 0.2s"},children:d==="daily"?"Êó•Ê¨°":d==="weekly"?"ÈÄ±Ê¨°":"ÊúàÊ¨°"},d))}),e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsx("label",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"0.5rem",display:"block",color:"#e4e4e7"},children:"Ê†ÑÈ§äÁ¥†„ÇíÈÅ∏Êäû"}),e.jsx("select",{value:h,onChange:d=>p(d.target.value),style:{width:"100%",padding:"0.75rem",border:"1px solid #27272a",borderRadius:"8px",fontSize:"14px",backgroundColor:"#18181b",color:"#e4e4e7"},children:c.map(d=>e.jsx("option",{value:d.key,children:d.label},d.key))})]}),f&&e.jsxs("div",{className:"stats-screen-chart-container",children:[e.jsxs("h2",{style:{fontSize:"18px",fontWeight:"bold",marginBottom:"1rem",color:"#f43f5e",textShadow:"0 0 5px rgba(244, 63, 94, 0.4)"},children:[f.label,"„ÅÆÊé®Áßª",n&&e.jsx("span",{style:{fontSize:"10px",color:"#a1a1aa",marginLeft:"0.5rem",border:"1px solid #a1a1aa",padding:"1px 4px",borderRadius:"4px"},children:"SAMPLE"})]}),e.jsx(A,{logs:y,nutrientKey:f.key,nutrientLabel:f.label,unit:f.unit,targetValue:f.target,period:s})]})]}),o==="weight"&&e.jsxs("div",{className:"stats-screen-weight-section",children:[e.jsxs("h2",{style:{fontSize:"18px",fontWeight:"bold",marginBottom:"1rem",color:"#06b6d4",textShadow:"0 0 5px rgba(6, 182, 212, 0.4)"},children:["‰ΩìÈáç„ÅÆÊé®Áßª",n&&e.jsx("span",{style:{fontSize:"10px",color:"#a1a1aa",marginLeft:"0.5rem",border:"1px solid #a1a1aa",padding:"1px 4px",borderRadius:"4px"},children:"SAMPLE"})]}),e.jsx(W,{logs:y,period:s})]}),e.jsx(_,{logs:y}),e.jsx(I,{logs:y})]})})}export{O as default};
