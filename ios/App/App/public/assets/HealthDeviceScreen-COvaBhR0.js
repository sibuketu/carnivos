import{u as x,j as t}from"./index-CvGLKNdl.js";import{r as s}from"./chart-vendor-BKK2UjWf.js";import"./react-vendor-OvXVS5lI.js";import"./ai-vendor-9LcfXvm6.js";const m="primal_logic_health_data";function j(r){try{const e=d(),l=e.findIndex(i=>i.date===r.date);l>=0?e[l]={...e[l],...r}:e.push(r),localStorage.setItem(m,JSON.stringify(e))}catch{}}function d(r){try{const e=localStorage.getItem(m);if(!e)return[];const l=JSON.parse(e);return r?l.filter(i=>i.date===r):l}catch{return[]}}async function b(r){try{return null}catch{return null}}async function N(r){try{return null}catch{return null}}async function F(r){try{return null}catch{return null}}async function S(r){try{return null}catch{return null}}async function p(r){try{const[e,l,i,o]=await Promise.all([b(r),N(r),F(r),S(r)]);return e===null&&l===null&&i===null&&o===null?null:{steps:e||void 0,heartRate:l||void 0,activeMinutes:i||void 0,caloriesBurned:o||void 0,date:r}}catch{return null}}function C({onBack:r}){x();const e=new Date().toISOString().split("T")[0],[l,i]=s.useState(()=>d(e)[0]||{date:e}),[o,h]=s.useState(!1),[u,c]=s.useState(!1),[f,v]=s.useState(null);s.useEffect(()=>{const a=d(e);a[0]&&i(a[0])},[e]),s.useEffect(()=>{(async()=>{c(!0);try{const n=await p(e);n&&(v(n),i(y=>({...y,steps:n.steps,heartRate:n.heartRate,activeMinutes:n.activeMinutes,caloriesBurned:n.caloriesBurned})))}catch{}finally{c(!1)}})()},[e]);const g=()=>{try{j(l),h(!0),setTimeout(()=>h(!1),2e3)}catch{alert("ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸ")}};return t.jsx("div",{className:"health-device-screen",children:t.jsxs("div",{className:"health-device-container",children:[t.jsx("button",{onClick:r,className:"health-device-back-button",children:"â† æˆ»ã‚‹"}),t.jsx("h1",{className:"health-device-title",children:"å¥åº·ãƒ‡ãƒã‚¤ã‚¹é€£æº"}),t.jsx("p",{className:"health-device-description",children:"Webã‚¢ãƒ—ãƒªã§ã¯ç›´æ¥çš„ãªé€£æºã¯é›£ã—ã„ãŸã‚ã€æ‰‹å‹•ã§å…¥åŠ›ã§ãã¾ã™ã€‚ å°†æ¥çš„ã«ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªï¼ˆExpoï¼‰ã§Apple Healthã€Google Fitã¨ã®é€£æºã‚’å®Ÿè£…äºˆå®šã§ã™ã€‚"}),t.jsxs("div",{style:{marginBottom:"1rem"},children:[t.jsx("button",{onClick:async()=>{c(!0);try{const a=await p(e);a&&(v(a),i({steps:a.steps,heartRate:a.heartRate,activeMinutes:a.activeMinutes,caloriesBurned:a.caloriesBurned}))}catch{}finally{c(!1)}},disabled:u,style:{padding:"0.5rem 1rem",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"8px",cursor:u?"not-allowed":"pointer",fontSize:"0.875rem"},children:u?"èª­ã¿è¾¼ã¿ä¸­...":"ğŸ”„ Google Fitã‹ã‚‰å–å¾—"}),f&&t.jsx("div",{style:{marginTop:"0.5rem",fontSize:"0.875rem",color:"#666"},children:"Google Fitãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¾ã—ãŸ"})]}),t.jsxs("div",{className:"health-device-form",children:[t.jsx("div",{className:"health-device-input-group",children:t.jsxs("label",{className:"health-device-label",children:["æ­©æ•°",t.jsx("input",{type:"number",value:l.steps||"",onChange:a=>i({...l,steps:a.target.value?Number(a.target.value):void 0}),placeholder:"ä¾‹: 10000",min:"0",className:"health-device-input"})]})}),t.jsx("div",{className:"health-device-input-group",children:t.jsxs("label",{className:"health-device-label",children:["å¿ƒæ‹æ•° (bpm)",t.jsx("input",{type:"number",value:l.heartRate||"",onChange:a=>i({...l,heartRate:a.target.value?Number(a.target.value):void 0}),placeholder:"ä¾‹: 70",min:"0",max:"220",className:"health-device-input"})]})}),t.jsx("div",{className:"health-device-input-group",children:t.jsxs("label",{className:"health-device-label",children:["æ´»å‹•æ™‚é–“ (åˆ†)",t.jsx("input",{type:"number",value:l.activeMinutes||"",onChange:a=>i({...l,activeMinutes:a.target.value?Number(a.target.value):void 0}),placeholder:"ä¾‹: 30",min:"0",className:"health-device-input"})]})}),t.jsx("div",{className:"health-device-input-group",children:t.jsxs("label",{className:"health-device-label",children:["æ¶ˆè²»ã‚«ãƒ­ãƒªãƒ¼ (kcal)",t.jsx("input",{type:"number",value:l.caloriesBurned||"",onChange:a=>i({...l,caloriesBurned:a.target.value?Number(a.target.value):void 0}),placeholder:"ä¾‹: 200",min:"0",className:"health-device-input"})]})}),t.jsx("button",{onClick:g,className:"health-device-save-button",children:o?"âœ“ ä¿å­˜ã—ã¾ã—ãŸ":"ä¿å­˜"})]}),t.jsxs("div",{className:"health-device-info",children:[t.jsx("h3",{children:"å°†æ¥å®Ÿè£…äºˆå®š"}),t.jsxs("ul",{children:[t.jsx("li",{children:"Apple Healthé€£æºï¼ˆiOSï¼‰"}),t.jsx("li",{children:"Google Fité€£æºï¼ˆAndroidï¼‰"}),t.jsx("li",{children:"è‡ªå‹•ãƒ‡ãƒ¼ã‚¿åŒæœŸ"})]})]})]})})}export{C as default};
